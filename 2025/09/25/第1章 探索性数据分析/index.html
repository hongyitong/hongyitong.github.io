<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hongyitong.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="《Practical Statistics for Data Scientists》书籍英文版 《面向数据科学家的实用统计学》中文版书籍 前言 本书旨在帮助对 R 和&#x2F;或 Python 编程语言有一定熟悉度、并对统计学有过一些前期（可能零星或短暂的）接触的数据科学家。两位作者从统计学领域进入数据科学世界，对统计学能为数据科学这门艺术所做的贡献心怀感激。与此同时，我们深知传统统计学教学的局限性：统计">
<meta property="og:type" content="article">
<meta property="og:title" content="第1章 探索性数据分析">
<meta property="og:url" content="http://hongyitong.github.io/2025/09/25/%E7%AC%AC1%E7%AB%A0%20%E6%8E%A2%E7%B4%A2%E6%80%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="墨语浮生">
<meta property="og:description" content="《Practical Statistics for Data Scientists》书籍英文版 《面向数据科学家的实用统计学》中文版书籍 前言 本书旨在帮助对 R 和&#x2F;或 Python 编程语言有一定熟悉度、并对统计学有过一些前期（可能零星或短暂的）接触的数据科学家。两位作者从统计学领域进入数据科学世界，对统计学能为数据科学这门艺术所做的贡献心怀感激。与此同时，我们深知传统统计学教学的局限性：统计">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6/F1.1.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.1.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.2.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.3.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.4.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.2.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.5.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.3.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.4.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.6.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.5.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.7.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.6.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.7.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.8.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.9.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//T1.8.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.10.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.11.png">
<meta property="og:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6//F1.12.png">
<meta property="article:published_time" content="2025-09-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-11-16T02:01:14.630Z">
<meta property="article:author" content="Rayman.hung">
<meta property="article:tag" content="统计">
<meta property="article:tag" content="深度学习">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="机器学习">
<meta property="article:tag" content="数据科学">
<meta property="article:tag" content="R">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hongyitong.github.io/img3/%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%9A%84%E5%AE%9E%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%AD%A6/F1.1.png">


<link rel="canonical" href="http://hongyitong.github.io/2025/09/25/%E7%AC%AC1%E7%AB%A0%20%E6%8E%A2%E7%B4%A2%E6%80%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://hongyitong.github.io/2025/09/25/%E7%AC%AC1%E7%AB%A0%20%E6%8E%A2%E7%B4%A2%E6%80%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/","path":"2025/09/25/第1章 探索性数据分析/","title":"第1章 探索性数据分析"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>第1章 探索性数据分析 | 墨语浮生</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZXGEJDXQ33"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-ZXGEJDXQ33","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">墨语浮生</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Rayman</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section">分类</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section">关于</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section">归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section">标签</a></li><li class="menu-item menu-item-commonweal"><a href="/404.html" rel="section">公益 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E4%B9%A6%E4%BD%BF%E7%94%A8%E7%9A%84%E7%BA%A6%E5%AE%9A"><span class="nav-number">1.1.</span> <span class="nav-text">本书使用的约定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.2.</span> <span class="nav-text">使用代码示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oreilly-%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0"><span class="nav-number">1.3.</span> <span class="nav-text">O’Reilly 在线学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC"><span class="nav-number">1.4.</span> <span class="nav-text">如何联系我们</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%B4%E8%B0%A2"><span class="nav-number">1.5.</span> <span class="nav-text">致谢</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC1%E7%AB%A0-%E6%8E%A2%E7%B4%A2%E6%80%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="nav-number">2.</span> <span class="nav-text">第1章 探索性数据分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%E7%9A%84%E5%85%83%E7%B4%A0"><span class="nav-number">2.1.</span> <span class="nav-text">结构化数据的元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A9%E5%BD%A2%E6%95%B0%E6%8D%AE"><span class="nav-number">2.2.</span> <span class="nav-text">矩形数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="nav-number">2.2.1.</span> <span class="nav-text">数据框和索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E7%9F%A9%E5%BD%A2%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">2.2.2.</span> <span class="nav-text">非矩形数据结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E7%BD%AE%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.3.</span> <span class="nav-text">位置估计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9D%87%E5%80%BC"><span class="nav-number">2.3.1.</span> <span class="nav-text">均值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E4%BD%8D%E6%95%B0%E5%92%8C%E7%A8%B3%E5%81%A5%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.3.2.</span> <span class="nav-text">中位数和稳健估计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.3.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E5%BC%82%E6%80%A7%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.4.</span> <span class="nav-text">变异性估计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%B7%AE%E5%92%8C%E7%9B%B8%E5%85%B3%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.4.1.</span> <span class="nav-text">标准差和相关估计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E7%99%BE%E5%88%86%E4%BD%8D%E6%95%B0%E7%9A%84%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.4.2.</span> <span class="nav-text">基于百分位数的估计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">2.4.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A2%E7%B4%A2%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83"><span class="nav-number">2.5.</span> <span class="nav-text">探索数据分布</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BE%E5%88%86%E4%BD%8D%E6%95%B0%E5%92%8C%E7%AE%B1%E7%BA%BF%E5%9B%BE"><span class="nav-number">2.5.1.</span> <span class="nav-text">百分位数和箱线图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%91%E7%8E%87%E8%A1%A8%E5%92%8C%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">2.5.2.</span> <span class="nav-text">频率表和直方图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%86%E5%BA%A6%E5%9B%BE%E5%92%8C%E5%AF%86%E5%BA%A6%E4%BC%B0%E8%AE%A1"><span class="nav-number">2.5.3.</span> <span class="nav-text">密度图和密度估计</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A2%E7%B4%A2%E4%BA%8C%E5%85%83%E5%92%8C%E7%B1%BB%E5%88%AB%E6%95%B0%E6%8D%AE"><span class="nav-number">2.6.</span> <span class="nav-text">探索二元和类别数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%97%E6%95%B0"><span class="nav-number">2.6.1.</span> <span class="nav-text">众数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%9F%E6%9C%9B%E5%80%BC"><span class="nav-number">2.6.2.</span> <span class="nav-text">期望值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E7%8E%87"><span class="nav-number">2.6.3.</span> <span class="nav-text">概率</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7"><span class="nav-number">2.7.</span> <span class="nav-text">相关性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="nav-number">2.7.1.</span> <span class="nav-text">散点图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A2%E7%B4%A2%E4%B8%A4%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="nav-number">2.8.</span> <span class="nav-text">探索两个或多个变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%AD%E8%BE%B9%E5%BD%A2%E5%88%86%E7%AE%B1%E5%92%8C%E7%AD%89%E9%AB%98%E7%BA%BF%E5%9B%BE"><span class="nav-number">2.8.1.</span> <span class="nav-text">六边形分箱和等高线图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%A4%E4%B8%AA%E7%B1%BB%E5%88%AB%E5%8F%98%E9%87%8F"><span class="nav-number">2.8.2.</span> <span class="nav-text">两个类别变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%88%AB%E6%95%B0%E6%8D%AE%E5%92%8C%E6%95%B0%E5%80%BC%E6%95%B0%E6%8D%AE"><span class="nav-number">2.8.3.</span> <span class="nav-text">类别数据和数值数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%9A%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="nav-number">2.8.4.</span> <span class="nav-text">可视化多个变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">2.9.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rayman.hung</p>
  <div class="site-description" itemprop="description">技术分享、读书心得、心情记录</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">163</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags">
        <span class="site-state-item-count">311</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hongyitong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hongyitong" rel="noopener" target="_blank">GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hongyitong.github.io/2025/09/25/%E7%AC%AC1%E7%AB%A0%20%E6%8E%A2%E7%B4%A2%E6%80%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rayman.hung">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="墨语浮生">
      <meta itemprop="description" content="技术分享、读书心得、心情记录">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="第1章 探索性数据分析 | 墨语浮生">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          第1章 探索性数据分析
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-25 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-25T00:00:00+08:00">2025-09-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BF%BB%E8%AF%91/" itemprop="url" rel="index"><span itemprop="name">翻译</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><a
href="/img3/面向数据科学家的实用统计学/Practical-Statistics-for-Data-Scientists.pdf">《Practical
Statistics for Data Scientists》书籍英文版</a><br />
<a
href="/img3/面向数据科学家的实用统计学/面向数据科学家的实用统计学.pdf">《面向数据科学家的实用统计学》中文版书籍</a></p>
<h2 id="前言"><strong>前言</strong></h2>
<p>本书旨在帮助对 <strong>R 和/或 Python
编程语言</strong>有一定熟悉度、并对统计学有过一些前期（可能零星或短暂的）接触的<strong>数据科学家</strong>。两位作者从统计学领域进入数据科学世界，对统计学能为数据科学这门艺术所做的贡献心怀感激。与此同时，我们深知传统统计学教学的局限性：统计学作为一门学科已有一个半世纪的历史，大多数统计学教科书和课程都承载着巨轮般的动量和惯性。本书中的所有方法都与统计学这门学科有着某种联系——无论是历史上的还是方法论上的。那些主要从计算机科学演变而来的方法，比如神经网络，则不包括在内。</p>
<p>本书的两个目标是：</p>
<ul>
<li>以易于消化、导航和参考的形式，列出与数据科学相关的<strong>关键统计概念</strong>。</li>
<li>从数据科学的角度解释<strong>哪些概念是重要且有用的，哪些则不那么重要，以及原因何在</strong>。</li>
</ul>
<span id="more"></span>
<h3 id="本书使用的约定"><strong>本书使用的约定</strong></h3>
<p>本书使用以下排版约定：</p>
<ul>
<li><strong>斜体（Italic）</strong>
表示新术语、URL、电子邮件地址、文件名和文件扩展名。</li>
<li><strong>等宽字体（Constant width）</strong>
用于程序列表，以及在段落中引用程序元素，如变量或函数名、数据库、数据类型、环境变量、语句和关键字。</li>
<li><strong>粗体等宽字体（Constant width bold）</strong>
显示应由用户按字面键入的命令或其他文本。</li>
</ul>
<p><strong>关键术语</strong></p>
<p>数据科学是多个学科的融合，包括<strong>统计学、计算机科学、信息技术和特定领域</strong>。因此，可以使用几个不同的术语来指代同一个概念。关键术语及其同义词将在本书中通过如下所示的侧边栏进行突出显示。</p>
<ul>
<li>这个元素表示提示或建议。</li>
<li>这个元素表示一般性注释。</li>
<li>这个元素表示警告或注意事项。</li>
</ul>
<h3 id="使用代码示例"><strong>使用代码示例</strong></h3>
<p>在所有情况下，本书都<strong>先给出 R 语言的代码示例，然后是
Python</strong>。为了避免不必要的重复，我们通常只展示由 R
代码产生的输出和图表。我们还省略了加载所需包和数据集的代码。您可以在 <a
target="_blank" rel="noopener" href="https://github.com/gedeck/practical-statistics-for-data-scientists">https://github.com/gedeck/practical-statistics-for-data-scientists</a>
下载完整的代码和数据集。</p>
<p>本书旨在帮助您完成工作。通常，如果本书提供了示例代码，您可以在您的程序和文档中使用它。除非您要复制很大一部分代码，否则无需联系我们获得许可。例如，编写一个使用本书中几个代码片段的程序不需要许可。但销售或分发来自
O'Reilly
书籍的示例需要许可。通过引用本书并引用示例代码来回答问题不需要许可。将本书中的大量示例代码整合到您的产品文档中则需要许可。</p>
<p>我们感激您的署名，但并非强制要求。署名通常包括书名、作者、出版商和
ISBN。例如：“《Practical Statistics for Data Scientists》由 Peter
Bruce、Andrew Bruce 和 Peter Gedeck（O'Reilly）著。版权所有 2020 Peter
Bruce、Andrew Bruce 和 Peter Gedeck，978-1-492-07294-2。”</p>
<p>如果您觉得您对代码示例的使用超出了合理使用或上述许可范围，请随时通过
permissions@oreilly.com 联系我们。</p>
<h3 id="oreilly-在线学习"><strong>O’Reilly 在线学习</strong></h3>
<p>40多年来，O’Reilly Media
一直提供技术和商业培训、知识和见解，以帮助公司取得成功。</p>
<p>我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专长。O’Reilly
的在线学习平台为您提供按需访问的直播培训课程、深入的学习路径、交互式编码环境以及来自
O’Reilly 和200多家其他出版商的大量文本和视频。欲了解更多信息，请访问 <a
target="_blank" rel="noopener" href="http://oreilly.com">http://oreilly.com</a>。</p>
<h3 id="如何联系我们"><strong>如何联系我们</strong></h3>
<p>有关本书的意见和问题，请联系出版商：</p>
<p>O’Reilly Media, Inc. 1005 Gravenstein Highway North Sebastopol, CA
95472 800-998-9938（美国或加拿大境内） 707-829-0515（国际或本地）
707-829-0104（传真）</p>
<p>我们为本书设立了一个网页，其中列出了勘误表、示例和任何其他信息。您可以在
<a
target="_blank" rel="noopener" href="https://oreil.ly/practicalStats_dataSci_2e">https://oreil.ly/practicalStats_dataSci_2e</a>
访问该页面。</p>
<p>发送电子邮件至
bookquestions@oreilly.com，对本书发表评论或提出技术问题。</p>
<p>如需了解有关我们书籍和课程的新闻及更多信息，请访问我们的网站 <a
target="_blank" rel="noopener" href="http://oreilly.com">http://oreilly.com</a>。</p>
<p>在 Facebook 上找到我们：<a
target="_blank" rel="noopener" href="http://facebook.com/oreilly">http://facebook.com/oreilly</a> 在
Twitter 上关注我们：<a
target="_blank" rel="noopener" href="http://twitter.com/oreillymedia">http://twitter.com/oreillymedia</a>
在 YouTube 上观看我们：<a
target="_blank" rel="noopener" href="http://www.youtube.com/oreillymedia">http://www.youtube.com/oreillymedia</a></p>
<h3 id="致谢"><strong>致谢</strong></h3>
<p>作者们感谢许多帮助本书成为现实的人。</p>
<p>数据挖掘公司 Elder Research 的首席执行官 Gerhard Pilcher
审阅了本书的早期草稿，并给予了我们详细而有益的修正和评论。同样，SAS
的统计学家 Anya McGuirk 和 Wei Xiao，以及 O’Reilly 的作者同事 Jay
Hilfiger，也对本书的初稿提供了有益的反馈。将第一版翻译成日文的 Toshiaki
Kurokawa 在此过程中进行了全面的审阅和纠正。Aaron Schumacher 和 Walter
Paczkowski
全面审阅了本书的第二版，并提供了许多有益和宝贵的建议，我们对此表示由衷的感谢。毋庸置疑，任何遗留的错误都由我们独自承担。</p>
<p>在 O’Reilly，Shannon Cutt
以愉悦的心情和恰当的催促引导我们完成了出版过程，而 Kristen Brown
则顺利地将我们的书带入了制作阶段。Rachel Monaghan 和 Eliahu Sussman
小心翼翼、耐心细致地纠正和改进了我们的写作，而 Ellen Troutman-Zaig
则负责编制了索引。Nicole Tache
负责了第二版的编辑工作，她不仅有效地指导了整个过程，还提供了许多优秀的编辑建议，以提高本书对广大读者的可读性。我们还要感谢
Marie Beaugureau，她在 O’Reilly 发起了我们的项目，以及 Ben
Bengfort，O’Reilly 的作者和 Statistics.com 的讲师，是他将我们介绍给了
O’Reilly。</p>
<p>我们和本书也受益于 Peter 多年来与 Galit
Shmueli（另一本图书项目的合著者）进行的多次交谈。</p>
<p>最后，我们特别感谢 Elizabeth Bruce 和 Deborah
Donnell，她们的耐心和支持使这项工作成为可能。</p>
<h2 id="第1章-探索性数据分析"><strong>第1章 探索性数据分析</strong></h2>
<p>Exploratory Data Analysis</p>
<p>本章重点介绍任何数据科学项目的第一步：<strong>探索数据</strong>。</p>
<p>经典的统计学几乎完全专注于<strong>推论（inference）</strong>，这是一套有时很复杂的程序，用于基于小样本对大总体得出结论。1962年，John
W.
Tukey（图1-1）在他那篇开创性论文《数据分析的未来》[Tukey-1962]中呼吁对统计学进行改革。他提出了一门名为<strong>数据分析</strong>的新科学学科，其中<strong>统计推论</strong>仅作为其一个组成部分。Tukey
与工程和计算机科学界建立了联系（他创造了<strong>bit</strong>，即<strong>binary
digit</strong>的缩写，以及 <strong>software</strong>
等术语），他的原始原则出人意料地持久，并构成了数据科学的基础之一。1977年，Tukey
凭借其如今已成为经典的著作<strong>《探索性数据分析》</strong>[Tukey-1977]奠定了<strong>探索性数据分析</strong>这一领域。Tukey
提出了简单的图表（例如，箱线图、散点图），这些图表与汇总统计量（均值、中位数、分位数等）一起，有助于描绘数据集的画面。</p>
<figure>
<img src="/img3/面向数据科学家的实用统计学/F1.1.png" alt="F1.1" />
<figcaption aria-hidden="true">F1.1</figcaption>
</figure>
<p>随着计算能力和富有表现力的数据分析软件的普及，探索性数据分析已经远远超出了其最初的范围。推动这一学科发展的关键因素是<strong>新技术的快速发展</strong>、<strong>获取更多和更大数据的能力</strong>以及在各种学科中<strong>更广泛地使用定量分析</strong>。斯坦福大学统计学教授、Tukey
的前本科生 David Donoho，根据他在新泽西州普林斯顿举行的 Tukey
百年纪念研讨会上的演讲撰写了一篇出色的文章 [Donoho-2015]。Donoho
将数据科学的起源追溯到 Tukey 在数据分析方面的开创性工作。</p>
<h3 id="结构化数据的元素"><strong>结构化数据的元素</strong></h3>
<p>Elements of Structured Data</p>
<p>数据来自许多来源：传感器测量、事件、文本、图像和视频。物联网（IoT）正在喷涌出信息流。这些数据中的大部分是<strong>非结构化</strong>的：图像是像素的集合，每个像素都包含
RGB（红、绿、蓝）颜色信息。文本是单词和非单词字符的序列，通常按章节、小节等组织。点击流是用户与应用程序或网页交互时的一系列动作。事实上，数据科学的一个主要挑战就是将这种原始数据的洪流转化为<strong>可操作的信息</strong>。为了应用本书涵盖的统计概念，必须对非结构化的原始数据进行处理和操作，使其成为<strong>结构化形式</strong>。结构化数据最常见的形式之一是<strong>带有行和列的表格</strong>——就像可能从关系数据库中出现或为研究而收集的数据一样。</p>
<p>结构化数据有两种基本类型：<strong>数值型</strong>和<strong>类别型</strong>。<strong>数值型数据</strong>有两种形式：<strong>连续型</strong>，例如风速或持续时间；<strong>离散型</strong>，例如事件发生的次数。<strong>类别型数据</strong>只取一个固定的值集，例如电视屏幕的类型（等离子、LCD、LED等）或州名（阿拉巴马州、阿拉斯加州等）。<strong>二元数据</strong>是类别型数据的一个重要特例，它只取两个值中的一个，例如0/1、是/否或真/假。另一种有用的类别型数据是<strong>有序数据（ordinal
data）</strong>，其中的类别是有序的；一个例子是数值评级（1、2、3、4或5）。</p>
<p>我们为什么要费心对数据类型进行分类呢？事实证明，出于<strong>数据分析</strong>和<strong>预测建模</strong>的目的，数据类型对于帮助确定<strong>视觉显示</strong>、<strong>数据分析</strong>或<strong>统计模型</strong>的类型非常重要。事实上，R
和 Python
等数据科学软件利用这些数据类型来提高计算性能。更重要的是，变量的数据类型决定了软件将如何处理该变量的计算。</p>
<p><strong>数据类型的关键术语</strong></p>
<ul>
<li><strong>数值型（Numeric）</strong> 在数值尺度上表达的数据。</li>
<li><strong>连续型（Continuous）</strong>
可以在一个区间内取任意值的数据。（同义词：<code>interval</code>（区间）、<code>float</code>（浮点））</li>
<li><strong>离散型（Discrete）</strong>
只能取整数值的数据，例如计数。（同义词：<code>integer</code>（整数）、<code>count</code>（计数））</li>
<li><strong>类别型（Categorical）</strong>
只能取一组代表可能类别的特定值的数据。（同义词：<code>enums</code>（枚举）、<code>enumerated</code>（枚举）、<code>factors</code>（因子）、<code>nominal</code>（名义））</li>
<li><strong>二元型（Binary）</strong>
类别型数据的一个特例，只有两个类别的值，例如
0/1、真/假。（同义词：<code>dichotomous</code>（二分）、<code>logical</code>（逻辑）、<code>indicator</code>（指示符）、<code>boolean</code>（布尔））</li>
<li><strong>有序型（Ordinal）</strong>
具有明确排序的类别型数据。（同义词：<code>ordered factor</code>（有序因子））</li>
</ul>
<p>软件工程师和数据库程序员可能会想，我们为什么还需要为分析引入<strong>类别型</strong>和<strong>有序型</strong>数据的概念。毕竟，类别仅仅是文本（或数值）值的集合，底层数据库会自动处理其内部表示。然而，将数据明确标识为类别型（与文本区分开来）确实提供了一些优势：</p>
<ul>
<li>知道数据是类别型可以作为一个信号，告诉软件如何执行统计过程，例如生成图表或拟合模型。特别是，有序数据在
R 中可以表示为
<code>ordered.factor</code>，在图表、表格和模型中保留用户指定的顺序。在
Python 中，<code>scikit-learn</code> 通过
<code>sklearn.preprocessing.OrdinalEncoder</code> 支持有序数据。</li>
<li>存储和索引可以得到优化（如在关系数据库中）。</li>
<li>给定类别变量可能取的值被强制在软件中（类似于枚举
<code>enum</code>）。</li>
</ul>
<p>第三个“好处”可能会导致意外或意料之外的行为：R 中数据导入函数（例如
<code>read.csv</code>）的默认行为是自动将文本列转换为因子
<code>factor</code>。之后对该列的操作将假定该列唯一允许的值是最初导入的值，并且分配一个新的文本值将引发警告并产生一个
<code>NA</code>（缺失值）。Python 中的 <code>pandas</code>
包不会自动进行这种转换。但是，您可以在 <code>read_csv</code>
函数中显式指定一个列为类别型。</p>
<p><strong>关键思想</strong></p>
<ul>
<li>在软件中，数据通常按<strong>类型</strong>进行分类。</li>
<li>数据类型包括<strong>数值型</strong>（连续型、离散型）和<strong>类别型</strong>（二元型、有序型）。</li>
<li>软件中的数据类型作为<strong>一个信号</strong>，告诉软件如何处理数据。</li>
</ul>
<h3 id="矩形数据"><strong>矩形数据</strong></h3>
<p>Rectangular Data</p>
<p>在数据科学中，典型的分析参考框架是一个<strong>矩形数据</strong>对象，就像电子表格或数据库表一样。</p>
<p><strong>矩形数据</strong>是一个通用术语，指代一个二维矩阵，其中<strong>行</strong>表示<strong>记录</strong>（案例），<strong>列</strong>表示<strong>特征</strong>（变量）；<strong>数据框（data
frame）</strong>是 R 和 Python
中特有的格式。数据并非总是以这种形式开始：非结构化数据（例如文本）必须经过处理和操作，才能以一组特征的形式在矩形数据中表示（参见第2页的“结构化数据的元素”）。关系数据库中的数据必须被提取并放入单个表中，以进行大多数数据分析和建模任务。</p>
<p><strong>矩形数据的关键术语</strong></p>
<ul>
<li><strong>数据框（Data frame）</strong>
矩形数据（如电子表格）是统计和机器学习模型的基本数据结构。</li>
<li><strong>特征（Feature）</strong> 表中的一列通常被称为特征。
<strong>同义词</strong>：<code>attribute</code>（属性）、<code>input</code>（输入）、<code>predictor</code>（预测变量）、<code>variable</code>（变量）</li>
<li><strong>结果（Outcome）</strong>
许多数据科学项目涉及预测一个结果——通常是<strong>是/否</strong>的结果（在表1-1中，它是“拍卖是否具有竞争力”）。在实验或研究中，特征有时被用来预测结果。
<strong>同义词</strong>：<code>dependent variable</code>（因变量）、<code>response</code>（响应）、<code>target</code>（目标）、<code>output</code>（输出）</li>
<li><strong>记录（Records）</strong> 表中的一行通常被称为记录。
<strong>同义词</strong>：<code>case</code>（案例）、<code>example</code>（例子）、<code>instance</code>（实例）、<code>observation</code>（观察）、<code>pattern</code>（模式）、<code>sample</code>（样本）</li>
</ul>
<p><img src="/img3/面向数据科学家的实用统计学//T1.1.png" alt="T1.1" style="zoom:70%;" /></p>
<p>在表1-1中，混合了测量或计数的数据（例如持续时间和价格）和类别数据（例如类别和货币）。如前所述，类别变量的一种特殊形式是<strong>二元（是/否或0/1）变量</strong>，如表1-1最右边的列所示——一个指示变量，显示拍卖是否具有竞争力（有多个竞标者）。当场景是预测拍卖是否具有竞争力时，这个指示变量也恰好是一个<strong>结果变量</strong>。</p>
<h4 id="数据框和索引"><strong>数据框和索引</strong></h4>
<p>Data Frames and Indexes</p>
<p>传统数据库表有一个或多个列被指定为<strong>索引</strong>，本质上是一个行号。这可以极大地提高某些数据库查询的效率。在
Python 中，使用 <strong>pandas</strong> 库，基本的矩形数据结构是
<strong>DataFrame</strong> 对象。默认情况下，DataFrame
会根据行的顺序创建一个自动整数索引。在 pandas
中，也可以设置多级/分层索引以提高某些操作的效率。</p>
<p>在 R 中，基本的矩形数据结构是 <code>data.frame</code>
对象。<code>data.frame</code> 也有一个基于行顺序的隐式整数索引。原生的 R
<code>data.frame</code> 不支持用户指定的或多级索引，但可以通过
<code>row.names</code>
属性创建自定义键。为了克服这一不足，两个新的包正在被广泛使用：<code>data.table</code>
和 <code>dplyr</code>。两者都支持多级索引，并在处理
<code>data.frame</code> 时提供了显著的速度提升。</p>
<blockquote>
<p>警告：</p>
<p>术语差异 <strong>Terminology Differences</strong></p>
<p>矩形数据的术语可能令人困惑。统计学家和数据科学家对同一事物使用不同的术语。对于统计学家来说，<code>predictor variables</code>（预测变量）用于模型中以预测
<code>response</code> 或
<code>dependent variable</code>（响应或因变量）。对于数据科学家来说，<code>features</code>（特征）用于预测
<code>target</code>（目标）。有一个同义词尤其令人困惑：计算机科学家将
<code>sample</code>（样本）这个术语用于单行；而对于统计学家来说，<code>sample</code>
意味着多行的集合。</p>
</blockquote>
<h4 id="非矩形数据结构"><strong>非矩形数据结构</strong></h4>
<p>Nonrectangular Data Structures</p>
<p>除了矩形数据之外，还有其他数据结构。</p>
<p><strong>时间序列数据</strong>记录同一变量的连续测量值。它是统计预测方法的原始材料，也是由设备（物联网）产生的数据的关键组成部分。</p>
<p><strong>空间数据结构</strong>用于地图和位置分析，比矩形数据结构更复杂、种类更多。在<strong>对象表示</strong>中，数据的焦点是一个<strong>对象</strong>（例如，一栋房子）及其空间坐标。相比之下，<strong>字段视图</strong>则侧重于<strong>小的空间单元</strong>和相关度量的值（例如，像素亮度）。</p>
<p><strong>图（或网络）数据结构</strong>用于表示物理、社交和抽象关系。例如，像
Facebook 或 LinkedIn
这样的社交网络图可以表示网络中人与人之间的联系。由道路连接的分销枢纽是物理网络的一个例子。图结构对于某些类型的问题很有用，例如网络优化和推荐系统。</p>
<p>每种数据类型在数据科学中都有其专门的方法。本书的重点是<strong>矩形数据</strong>，它是<strong>预测建模的基本构建块</strong>。</p>
<blockquote>
<p>警告：</p>
<p><strong>统计学中的“图”</strong> Graphs in
Statistics在计算机科学和信息技术中，“图（graph）”这个术语通常指实体之间连接的描绘，以及底层的数据结构。而在统计学中，“图”则用于指各种<strong>图表和可视化</strong>，不仅仅是实体之间的连接，并且该术语仅适用于<strong>可视化</strong>，而不适用于数据结构。</p>
</blockquote>
<p><strong>关键思想</strong></p>
<ul>
<li>数据科学中的基本数据结构是一个<strong>矩形矩阵</strong>，其中行是记录，列是变量（特征）。</li>
<li>术语可能令人困惑；由于对数据科学做出贡献的不同学科（统计学、计算机科学和信息技术），存在各种同义词。</li>
</ul>
<h3 id="位置估计"><strong>位置估计</strong></h3>
<p>Estimates of Location</p>
<p>测量或计数的数据变量可能具有数千个不同的值。探索数据的一个基本步骤是获取每个<strong>特征</strong>（变量）的“<strong>典型值</strong>”：对大多数数据所在位置的估计（即其<strong>中心趋势</strong>）。</p>
<p><strong>位置估计的关键术语</strong></p>
<ul>
<li><strong>均值（Mean）</strong> 所有值的总和除以值的数量。
<strong>同义词</strong>：<code>average</code>（平均值）</li>
<li><strong>加权平均值（Weighted mean）</strong>
所有值乘以一个权重，再除以所有权重的总和。
<strong>同义词</strong>：<code>weighted average</code>（加权平均值）</li>
<li><strong>中位数（Median）</strong>
数据中有一半值在其之上，一半值在其之下的那个值。
<strong>同义词</strong>：<code>50th percentile</code>（第50百分位数）</li>
<li><strong>百分位数（Percentile）</strong> 数据中有 <span
class="math inline">\(P\)</span> 百分比的值在其之下的那个值。
<strong>同义词</strong>：<code>quantile</code>（分位数）</li>
<li><strong>加权中位数（Weighted median）</strong>
排序数据中，权重的总和有一半在其之上，一半在其之下的那个值。</li>
<li><strong>截尾均值（Trimmed mean）</strong>
在去除固定数量的极端值后，所有值的平均值。
<strong>同义词</strong>：<code>truncated mean</code>（截断均值）</li>
<li><strong>稳健（Robust）</strong> 对极端值不敏感。
<strong>同义词</strong>：<code>resistant</code>（有抵抗力）</li>
<li><strong>异常值（Outlier）</strong> 与大部分数据非常不同的数据值。
<strong>同义词</strong>：<code>extreme value</code>（极端值）</li>
</ul>
<p>乍一看，汇总数据似乎相当简单：只需计算数据的均值。然而，尽管均值易于计算且方便使用，但它可能并非总是衡量中心值的最佳方法。因此，统计学家开发并推广了几个替代均值的估计量。</p>
<blockquote>
<p>通用注解：<strong>度量与估计</strong> Metrics and Estimates
统计学家经常使用“<strong>估计</strong>（estimate）”一词来指代从现有数据中计算出的值，以区分我们从数据中看到的内容与理论上的真实或精确状态。数据科学家和业务分析师更倾向于将此类值称为“<strong>度量</strong>（metric）”。这种差异反映了统计学与数据科学各自的方法：<strong>考虑不确定性是统计学学科的核心</strong>，而<strong>具体的业务或组织目标是数据科学的焦点</strong>。因此，<strong>统计学家进行估计，而数据科学家进行度量</strong>。</p>
</blockquote>
<h4 id="均值"><strong>均值</strong></h4>
<p>Mean</p>
<p>最基本的位置估计量是<strong>均值（mean）</strong>，或称平均值。均值是<strong>所有值的总和除以值的数量</strong>。考虑以下这组数字：<span
class="math inline">\(\{3, 5, 1, 2\}\)</span>。均值为 <span
class="math inline">\((3 + 5 + 1 + 2) / 4 = 11 / 4 =
2.75\)</span>。您会看到符号 <span
class="math inline">\(\bar{x}\)</span>（读作“x-bar”）用于表示从总体中抽取的样本的均值。计算一组
<span class="math inline">\(n\)</span> 个值 <span
class="math inline">\(x_1, x_2, \dots, x_n\)</span> 的均值的公式是：</p>
<p><span class="math display">\[
\text{Mean} = \bar{x} = \frac{\sum_{i=1}^{n} x_i}{n}
\]</span></p>
<blockquote>
<p>通用注解：</p>
<p><span class="math inline">\(N(或
n)\)</span>指代记录或观察的总数。在统计学中，如果指的是总体，则大写；如果指的是从总体中抽取的样本，则小写。在数据科学中，这种区别并不重要，因此您可能会看到这两种用法。</p>
</blockquote>
<p>均值的一个变体是<strong>截尾均值（trimmed
mean）</strong>，其计算方法是<strong>先剔除排序后两端固定数量的值</strong>，然后对剩余的值求平均。用
<span class="math inline">\(x_{(1)}, x_{(2)}, \dots, x_{(n)}\)</span>
表示排序后的值，其中 <span class="math inline">\(x_{(1)}\)</span>
是最小值，<span class="math inline">\(x_{(n)}\)</span>
是最大值，计算剔除 <span class="math inline">\(p\)</span>
个最小和最大值的截尾均值的公式是：</p>
<p><span class="math display">\[
\text{Trimmed mean} = \bar{x}_{t} = \frac{\sum_{i=p+1}^{n-p}
x_{(i)}}{n-2p}
\]</span></p>
<p>截尾均值<strong>消除了极端值的影响</strong>。例如，在国际跳水比赛中，会去掉五名裁判的最高分和最低分，最终得分是剩余三名裁判的平均分。这使得单个裁判难以操纵分数，可能为了偏袒他们本国的选手。截尾均值被广泛使用，在许多情况下优于使用普通均值——有关进一步讨论，请参见第10页的“中位数和稳健估计”。</p>
<p>另一种类型的均值是<strong>加权平均值（weighted
mean）</strong>，其计算方法是<strong>将每个数据值 <span
class="math inline">\(x_i\)</span> 乘以用户指定的权重 <span
class="math inline">\(w_i\)</span>，然后将它们的总和除以权重的总和</strong>。加权平均值的公式是：</p>
<p><span class="math display">\[
\text{Weighted mean} = \bar{x}_w = \frac{\sum_{i=1}^{n} w_i
x_i}{\sum_{i=1}^{n} w_i}
\]</span></p>
<p>使用加权平均值有两个主要动机：</p>
<ul>
<li><strong>一些值的内在变异性比其他值更大</strong>，变异性大的观测值被赋予较低的权重。例如，如果我们从多个传感器取平均值，其中一个传感器的精度较低，那么我们可能会降低该传感器数据的权重。</li>
<li><strong>收集到的数据不能平等地代表我们感兴趣的不同群体</strong>。例如，由于在线实验的进行方式，我们可能没有一组数据能够准确反映用户群中的所有群体。为了纠正这一点，我们可以给那些代表性不足的群体的值赋予更高的权重。</li>
</ul>
<h4 id="中位数和稳健估计"><strong>中位数和稳健估计</strong></h4>
<p>Median and Robust Estimates</p>
<p><strong>中位数</strong>是<strong>排序数据列表中的中间数</strong>。如果数据值的数量是偶数，中间值并不是数据集中实际存在的某个值，而是将排序数据分为上半部分和下半部分的<strong>两个值的平均值</strong>。与使用所有观察值的均值相比，中位数仅依赖于排序数据中心的值。虽然这看似是一个缺点，因为均值对数据更为敏感，但在许多情况下，中位数是衡量位置的更好指标。比如说，我们想看看西雅图华盛顿湖周围社区的典型家庭收入。在比较
Medina 社区和 Windermere
社区时，如果使用均值会产生非常不同的结果，因为比尔·盖茨住在
Medina。如果我们使用中位数，比尔·盖茨有多富有都无关紧要——<strong>中间观察值的位置将保持不变</strong>。</p>
<p>出于使用加权均值的原因，也可以计算<strong>加权中位数</strong>。与中位数一样，我们首先对数据进行排序，尽管每个数据值都有一个相关的权重。加权中位数不是中间的数字，而是<strong>一个值，使得排序列表中较低和较高部分权重的总和相等</strong>。像中位数一样，加权中位数对异常值是稳健的。</p>
<p><strong>异常值</strong></p>
<p>Outliers</p>
<p>中位数被称为<strong>位置的稳健估计</strong>，因为它不受可能使结果扭曲的<strong>异常值（极端情况）</strong>的影响。<strong>异常值</strong>是数据集中与大多数其他值非常不同的任何值。异常值的确切定义有些主观，尽管在各种数据摘要和图表中使用了某些惯例（参见第20页的“百分位数和箱线图”）。作为异常值本身并不意味着数据值无效或有误（如比尔·盖茨的例子）。尽管如此，异常值通常是由于数据错误造成的，例如混合了不同单位的数据（千米与米）或传感器读数不良。当异常值是糟糕数据的结果时，均值将导致一个糟糕的位置估计，而<strong>中位数仍然是有效的</strong>。无论如何，异常值都应该被识别出来，并且通常值得进一步调查。</p>
<blockquote>
<p>通用注解：<strong>异常检测</strong>Anomaly Detection</p>
<p>与典型的数据分析不同，在典型数据分析中，异常值有时具有信息性，有时是麻烦，而在<strong>异常检测</strong>中，感兴趣的点就是<strong>异常值</strong>，而大部分数据主要用于定义<strong>“正常”</strong>，以此来衡量异常。</p>
</blockquote>
<p>中位数不是唯一的位置稳健估计。事实上，<strong>截尾均值</strong>被广泛用于避免异常值的影响。例如，截去数据底部和顶部的10%（一个常见的选择）将为除了最小的数据集之外的所有数据集提供对抗异常值的保护。截尾均值可以被认为是中位数和均值之间的一种折衷：它对数据中的极端值是稳健的，但使用更多的数据来计算位置估计。</p>
<blockquote>
<p>知识点：</p>
<p><strong>其他位置的稳健度量</strong> Other Robust Metrics for
Location</p>
<p>统计学家已经开发了大量其他用于位置的估计量，其主要目标是开发比均值更稳健、也更有效（即，更能辨别数据集之间微小位置差异）的估计量。虽然这些方法对于小型数据集可能有用，但对于大型或甚至中等大小的数据集，它们不太可能提供额外的好处。</p>
</blockquote>
<h4 id="示例"><strong>示例</strong></h4>
<p>人口和谋杀率的位置估计</p>
<p>Example: Location Estimates of Population and Murder Rates</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.2.png" alt="T1.2" style="zoom:67%;" /></p>
<p>表1-2显示了数据集中前几行，其中包含美国各州的人口和谋杀率（单位为每年每10万人中的谋杀案数）（2010年人口普查）。</p>
<p>使用 R 计算人口的均值、截尾均值和中位数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> state <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;state.csv&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> mean<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6162876</span></span><br><span class="line"><span class="operator">&gt;</span> mean<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> trim<span class="operator">=</span><span class="number">0.1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4783697</span></span><br><span class="line"><span class="operator">&gt;</span> median<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4436370</span></span><br></pre></td></tr></table></figure>
<p>要在 Python 中计算均值和中位数，我们可以使用数据框的 pandas
方法。截尾均值需要 <code>scipy.stats</code> 中的 <code>trim_mean</code>
函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">state = pd.read_csv(<span class="string">&#x27;state.csv&#x27;</span>)</span><br><span class="line">state[<span class="string">&#x27;Population&#x27;</span>].mean()</span><br><span class="line">trim_mean(state[<span class="string">&#x27;Population&#x27;</span>], <span class="number">0.1</span>)</span><br><span class="line">state[<span class="string">&#x27;Population&#x27;</span>].median()</span><br></pre></td></tr></table></figure>
<p>均值<strong>大于</strong>截尾均值，截尾均值<strong>大于</strong>中位数。这是因为截尾均值<strong>排除了最大和最小的五个州</strong>（<code>trim=0.1</code>
从每一端剔除10%）。如果我们想计算<strong>全国的平均谋杀率</strong>，我们需要使用<strong>加权均值或中位数</strong>来考虑各州的不同人口。由于基础
R 没有加权中位数的函数，我们需要安装一个像 <code>matrixStats</code>
这样的包：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> weighted.mean<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Murder.Rate&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> w<span class="operator">=</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4.445834</span></span><br><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span><span class="string">&#x27;matrixStats&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> weightedMedian<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Murder.Rate&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> w<span class="operator">=</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4.4</span></span><br></pre></td></tr></table></figure>
<p>加权均值可以通过 NumPy 获得。对于加权中位数，我们可以使用专门的包
<code>wquantiles</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.average(state[<span class="string">&#x27;Murder.Rate&#x27;</span>], weights=state[<span class="string">&#x27;Population&#x27;</span>])</span><br><span class="line">wquantiles.median(state[<span class="string">&#x27;Murder.Rate&#x27;</span>], weights=state[<span class="string">&#x27;Population&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>在这种情况下，加权均值和加权中位数<strong>大致相同</strong>。</p>
<p><strong>关键思想</strong></p>
<ul>
<li>位置的基本度量是<strong>均值</strong>，但它可能对<strong>极端值（异常值）敏感</strong>。</li>
<li>其他度量（<strong>中位数、截尾均值</strong>）对异常值和不寻常的分布<strong>不太敏感</strong>，因此<strong>更具稳健性</strong>。</li>
</ul>
<h3 id="变异性估计"><strong>变异性估计</strong></h3>
<p>Estimates of Variability</p>
<p><strong>位置</strong>只是概括一个特征的一个维度。第二个维度，<strong>变异性</strong>（也称为<strong>离散度</strong>），衡量数据值是<strong>紧密聚集</strong>还是<strong>分散开来</strong>。统计学的核心在于<strong>变异性</strong>：测量它、减少它、区分随机变异与真实变异、识别真实变异的各种来源，并在变异存在的情况下做出决策。</p>
<p><strong>变异性度量的关键术语</strong></p>
<ul>
<li><strong>偏差（Deviations）</strong> 观察值与位置估计值之间的差。
<strong>同义词</strong>：<code>errors</code>（误差）、<code>residuals</code>（残差）</li>
<li><strong>方差（Variance）</strong> 观察值与均值之间偏差的平方和，除以
<span class="math inline">\(n-1\)</span>，其中 <span
class="math inline">\(n\)</span> 是数据值的数量。
<strong>同义词</strong>：<code>mean-squared-error</code>（均方误差）</li>
<li><strong>标准差（Standard deviation）</strong> 方差的平方根。</li>
<li><strong>平均绝对偏差（Mean absolute deviation）</strong>
观察值与均值之间偏差的绝对值的均值。
<strong>同义词</strong>：<code>l1-norm</code>（L1范数）、<code>Manhattan norm</code>（曼哈顿范数）</li>
<li><strong>中位数绝对偏差（Median absolute deviation from the
median）</strong> 观察值与中位数之间偏差的绝对值的中位数。</li>
<li><strong>极差（Range）</strong> 数据集中最大值和最小值之间的差。</li>
<li><strong>顺序统计量（Order statistics）</strong>
基于从最小到最大排序的数据值计算的度量。
<strong>同义词</strong>：<code>ranks</code>（秩）</li>
<li><strong>百分位数（Percentile）</strong> 数据中 <span
class="math inline">\(P\)</span> 百分比的值取这个值或更小，<span
class="math inline">\((100-P)\)</span>
百分比的值取这个值或更大的那个值。
<strong>同义词</strong>：<code>quantile</code>（分位数）</li>
<li><strong>四分位距（Interquartile range）</strong>
第75百分位数和第25百分位数之间的差。
<strong>同义词</strong>：<code>IQR</code></li>
</ul>
<p>正如衡量位置有不同的方法（均值、中位数等），衡量变异性也有不同的方法。</p>
<h4 id="标准差和相关估计"><strong>标准差和相关估计</strong></h4>
<p>Standard Deviation and Related Estimates</p>
<p>最广泛使用的变异性估计是基于<strong>位置估计</strong>与<strong>观测数据</strong>之间的<strong>差异</strong>或<strong>偏差</strong>。对于一组数据
<span class="math inline">\(\{1, 4,
4\}\)</span>，均值为3，中位数为4。与均值的偏差是：<span
class="math inline">\(1 - 3 = -2\)</span>，<span class="math inline">\(4
- 3 = 1\)</span>，<span class="math inline">\(4 - 3 =
1\)</span>。这些偏差告诉我们数据围绕中心值的离散程度。</p>
<p>衡量变异性的一种方法是<strong>估计这些偏差的典型值</strong>。对偏差本身求平均值不会告诉我们太多——负偏差会抵消正偏差。事实上，与均值的偏差总和正好为零。相反，一个简单的方法是取<strong>与均值偏差的绝对值的平均值</strong>。在前面的例子中，偏差的绝对值是
<span class="math inline">\(\{2, 1, 1\}\)</span>，它们的平均值是 <span
class="math inline">\((2 + 1 + 1) / 3 =
1.33\)</span>。这被称为<strong>平均绝对偏差</strong>，其计算公式为：</p>
<p><span class="math display">\[
\text{平均绝对偏差} = \frac{\sum_{i=1}^{n} |x_i - \bar{x}|}{n}
\]</span></p>
<p>其中 <span class="math inline">\(\bar{x}\)</span> 是样本均值。</p>
<p>最著名的变异性估计是<strong>方差</strong>和<strong>标准差</strong>，它们基于<strong>平方偏差</strong>。方差是平方偏差的平均值，标准差是方差的平方根：</p>
<p><span class="math display">\[
\text{方差} = s^2 = \frac{\sum_{i=1}^{n} (x_i - \bar{x})^2}{n-1}
\]</span> <span class="math display">\[
\text{标准差} = s = \sqrt{\text{方差}}
\]</span></p>
<p>标准差比方差更容易解释，因为它与原始数据处于<strong>相同的尺度</strong>。然而，由于其更复杂、更不直观的公式，统计学中对标准差的偏爱胜过平均绝对偏差，这可能看起来很奇特。它之所以享有盛誉，归功于<strong>统计学理论</strong>：在数学上，使用平方值比使用绝对值方便得多，尤其是对于统计模型。</p>
<p><strong>自由度，以及 <span class="math inline">\(n\)</span> 还是
<span class="math inline">\(n-1\)</span>？</strong></p>
<p>在统计学书籍中，总会讨论为什么方差公式的分母是 <span
class="math inline">\(n-1\)</span> 而不是 <span
class="math inline">\(n\)</span>，这引出了<strong>自由度</strong>的概念。这种区别并不重要，因为
<span class="math inline">\(n\)</span> 通常足够大，以至于除以 <span
class="math inline">\(n\)</span> 或 <span
class="math inline">\(n-1\)</span>
都没有太大区别。但如果您感兴趣，这里是原因。它基于一个前提：您想根据<strong>样本</strong>对<strong>总体</strong>进行估计。</p>
<p>如果您在方差公式中使用直观的分母 <span
class="math inline">\(n\)</span>，您将<strong>低估</strong>总体中方差和标准差的真实值。这被称为<strong>有偏估计（biased
estimate）</strong>。然而，如果您用 <span
class="math inline">\(n-1\)</span> 而不是 <span
class="math inline">\(n\)</span>
来除，方差就变成了<strong>无偏估计（unbiased estimate）</strong>。</p>
<p>要完全解释为什么使用 <span class="math inline">\(n\)</span>
会导致有偏估计，需要<strong>自由度</strong>的概念，它考虑了计算估计量时的约束数量。在这种情况下，有
<span class="math inline">\(n-1\)</span>
个自由度，因为存在一个约束：<strong>标准差的计算依赖于样本均值</strong>。对于大多数问题，数据科学家<strong>不需要担心自由度</strong>。</p>
<p>无论是方差、标准差还是平均绝对偏差，它们都<strong>不稳健</strong>，对异常值和极端值敏感（有关位置的稳健估计的讨论，请参见第10页的“中位数和稳健估计”）。方差和标准差由于基于<strong>平方偏差</strong>，对异常值尤其敏感。</p>
<p><strong>变异性</strong>的一个<strong>稳健估计</strong>是<strong>中位数绝对偏差（MAD）</strong>：</p>
<p><span class="math display">\[
\text{中位数绝对偏差} = \text{Median}\{|x_1 - m|, |x_2 - m|, \dots, |x_N
- m|\}
\]</span></p>
<p>其中 <span class="math inline">\(m\)</span>
是中位数。像中位数一样，MAD<strong>不受极端值的影响</strong>。也可以计算类似于截尾均值的<strong>截尾标准差</strong>（参见第9页的“均值”）。</p>
<blockquote>
<p>通用注解：</p>
<p>方差、标准差、平均绝对偏差和中位数绝对偏差即使在数据来自正态分布的情况下，也<strong>不是等价的估计量</strong>。事实上，标准差总是大于平均绝对偏差，而平均绝对偏差本身又大于中位数绝对偏差。有时，中位数绝对偏差会乘以一个常数<strong>比例因子</strong>，以便在正态分布的情况下，将
MAD
放在与标准差相同的尺度上。常用的因子是1.4826，这意味着50%的正态分布落在
±MAD 的范围内（例如，参见 <a
target="_blank" rel="noopener" href="https://oreil.ly/SfDk2">https://oreil.ly/SfDk2</a>）。</p>
</blockquote>
<h4 id="基于百分位数的估计"><strong>基于百分位数的估计</strong></h4>
<p>Estimates Based on Percentiles</p>
<p>另一种估计<strong>离散度</strong>的方法是查看<strong>排序数据</strong>的<strong>扩展（spread）</strong>。基于排序（排名）数据的统计量被称为<strong>顺序统计量（order
statistics）</strong>。最基本的度量是<strong>极差（range）</strong>：最大值和最小值之间的差。最小值和最大值本身很有用，有助于识别异常值，但<strong>极差</strong>对异常值<strong>极其敏感</strong>，作为数据离散度的通用度量<strong>用处不大</strong>。</p>
<p>为了避免对异常值的敏感性，我们可以查看<strong>剔除两端值后</strong>数据的极差。形式上，这些类型的估计基于<strong>百分位数之间的差</strong>。在一个数据集中，<strong>第
<span class="math inline">\(P\)</span>
个百分位数</strong>是一个值，<strong>至少有 <span
class="math inline">\(P\)</span> 百分比的值取该值或更小，并且至少有
<span class="math inline">\((100-P)\)</span>
百分比的值取该值或更大</strong>。例如，要找到第80个百分位数，请对数据进行排序。然后，从最小值开始，前进到<strong>距离最大值80%的位置</strong>。请注意，<strong>中位数</strong>与<strong>第50个百分位数</strong>是同一回事。百分位数本质上与<strong>分位数（quantile）</strong>相同，分位数用小数索引（因此
.8 分位数与第80百分位数相同）。</p>
<p>一个常见的变异性度量是<strong>第25百分位数和第75百分位数之间的差</strong>，称为<strong>四分位距（interquartile
range，IQR）</strong>。这里有一个简单的例子：<span
class="math inline">\(\{3,1,5,3,6,7,2,9\}\)</span>。我们对其进行排序得到
<span
class="math inline">\(\{1,2,3,3,5,6,7,9\}\)</span>。第25百分位数在2.5处，第75百分位数在6.5处，因此四分位距为
<span class="math inline">\(6.5 - 2.5 =
4\)</span>。软件可能有略微不同的方法，会产生不同的答案（参见下面的提示）；通常，这些差异很小。</p>
<p>对于<strong>非常大的数据集</strong>，计算<strong>精确的百分位数</strong>在计算上可能非常昂贵，因为它需要对所有数据值进行排序。机器学习和统计软件使用特殊算法，例如
[Zhang-Wang-2007]，来获得可以非常快速计算并保证具有一定准确度的<strong>近似百分位数</strong>。</p>
<blockquote>
<p>知识点：</p>
<p><strong>百分位数：精确定义</strong> Percentile: Precise
Definition</p>
<p>如果我们的数据数量是偶数（<span class="math inline">\(n\)</span>
是偶数），那么根据前面的定义，百分位数是<strong>模糊的</strong>。事实上，在满足以下条件的
<span class="math inline">\(j\)</span>
的情况下，我们可以取<strong>任何介于顺序统计量 <span
class="math inline">\(x_{(j)}\)</span> 和 <span
class="math inline">\(x_{(j+1)}\)</span> 之间的值</strong>： <span
class="math display">\[
\frac{100 \cdot j}{n} \le P &lt; \frac{100 \cdot (j+1)}{n}
\]</span></p>
<p>正式地，百分位数是<strong>加权平均值</strong>：</p>
<p><span class="math display">\[
\text{百分位数 } P = (1 - w)x_{(j)} + wx_{(j+1)}
\]</span></p>
<p>其中 <span class="math inline">\(w\)</span>
是介于0和1之间的一些权重。统计软件在选择 <span
class="math inline">\(w\)</span> 的方法上略有不同。事实上，R 函数
<code>quantile</code>
提供了<strong>九种</strong>不同的计算分位数的方法。除了小型数据集，您通常<strong>不需要担心百分位数的确切计算方式</strong>。在撰写本文时，Python
的 <code>numpy.quantile</code>
<strong>仅支持</strong>一种方法，即<strong>线性插值</strong>。</p>
</blockquote>
<h4 id="示例-1"><strong>示例</strong></h4>
<p>州人口的变异性估计</p>
<p>Example: Variability Estimates of State Population</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.3.png" alt="T1.3" style="zoom:67%;" /></p>
<p>表1-3（为方便起见重复了表1-2）显示了数据集中包含每个州的人口和谋杀率的前几行。</p>
<p>使用 R
的内置函数来计算标准差（<code>sd</code>）、四分位距（<code>IQR</code>）和中位数绝对偏差（<code>mad</code>），我们可以计算州人口数据的变异性估计：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> sd<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6848235</span></span><br><span class="line"><span class="operator">&gt;</span> IQR<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4847308</span></span><br><span class="line"><span class="operator">&gt;</span> mad<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3849870</span></span><br></pre></td></tr></table></figure>
<p>pandas
数据框提供了计算标准差和分位数的方法。使用分位数，我们可以轻松确定
IQR。对于稳健的 MAD，我们使用 <code>statsmodels</code> 包中的
<code>robust.scale.mad</code> 函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">state[<span class="string">&#x27;Population&#x27;</span>].std()</span><br><span class="line">state[<span class="string">&#x27;Population&#x27;</span>].quantile(<span class="number">0.75</span>) - state[<span class="string">&#x27;Population&#x27;</span>].quantile(<span class="number">0.25</span>)</span><br><span class="line">robust.scale.mad(state[<span class="string">&#x27;Population&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>标准差几乎是 MAD 的两倍（在 R 中，默认情况下，MAD
的尺度被调整为与均值在同一尺度上）。这并不奇怪，因为<strong>标准差对异常值很敏感</strong>。</p>
<p><strong>关键思想</strong></p>
<ul>
<li><strong>方差</strong>和<strong>标准差</strong>是<strong>最广泛使用</strong>和<strong>常规报告</strong>的变异性统计量。</li>
<li>两者都<strong>对异常值敏感</strong>。</li>
<li>更<strong>稳健</strong>的度量包括<strong>平均绝对偏差</strong>、<strong>中位数绝对偏差</strong>和<strong>百分位数（分位数）</strong>。</li>
</ul>
<h3 id="探索数据分布"><strong>探索数据分布</strong></h3>
<p>Exploring the Data Distribution</p>
<p>我们所涵盖的每一个估计量都将数据汇总为一个单一数字，来描述数据的位置或变异性。探索数据的<strong>整体分布</strong>也很有用。</p>
<p><strong>探索分布的关键术语</strong></p>
<ul>
<li><strong>箱线图（Boxplot）</strong> Tukey
提出的一种图，作为快速可视化数据分布的方法。
<strong>同义词</strong>：<code>box and whiskers plot</code>（盒须图）</li>
<li><strong>频率表（Frequency table）</strong>
落入一组区间（<strong>箱</strong>）的数值数据的计数。</li>
<li><strong>直方图（Histogram）</strong>
频率表的图，其中<strong>箱</strong>在 x
轴上，<strong>计数</strong>（或比例）在 y
轴上。虽然在视觉上相似，但<strong>条形图不应与直方图混淆</strong>。有关差异的讨论，请参见第27页的“探索二元和类别数据”。</li>
<li><strong>密度图（Density plot）</strong>
直方图的平滑版本，通常基于<strong>核密度估计</strong>。</li>
</ul>
<h4 id="百分位数和箱线图"><strong>百分位数和箱线图</strong></h4>
<p>Percentiles and Boxplots</p>
<p>在第16页的“基于百分位数的估计”中，我们探讨了百分位数如何用于衡量数据的<strong>离散度</strong>。百分位数对于<strong>汇总整个分布</strong>也很有价值。通常会报告<strong>四分位数</strong>（第25、50和75百分位数）和<strong>十分位数</strong>（第10、20、...、90百分位数）。百分位数对于<strong>汇总分布的尾部</strong>（外部范围）特别有价值。流行文化创造了“百分之一的人”（one-percenters）这个术语来指代那些财富处于第99百分位数的人。</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.4.png" alt="T1.4" style="zoom:70%;" /></p>
<p>表1-4显示了按州划分的谋杀率的一些百分位数。在 R 中，这将由
<code>quantile</code> 函数生成：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quantile<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Murder.Rate&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> p<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">.05</span><span class="punctuation">,</span> <span class="number">.25</span><span class="punctuation">,</span> <span class="number">.5</span><span class="punctuation">,</span> <span class="number">.75</span><span class="punctuation">,</span> <span class="number">.95</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   5%   25%   50%   75%   95% </span><br><span class="line">1.600 2.425 4.000 5.550 6.510 </span><br></pre></td></tr></table></figure>
<p>pandas 数据框方法 <code>quantile</code> 在 Python 中提供此功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state[<span class="string">&#x27;Murder.Rate&#x27;</span>].quantile([<span class="number">0.05</span>, <span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>, <span class="number">0.95</span>])</span><br></pre></td></tr></table></figure>
<p>中位数是每10万人中有4起谋杀案，尽管存在相当大的变异性：第5百分位数仅为1.6，而第95百分位数是6.51。</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.2.png" alt="F1.2" style="zoom:50%;" /></p>
<p>由 Tukey [Tukey-1977]
引入的<strong>箱线图</strong>基于百分位数，提供了一种快速可视化数据分布的方法。图1-2显示了由
R 生成的按州划分的人口箱线图：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boxplot<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="operator">/</span><span class="number">1000000</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&#x27;Population (millions)&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>pandas 为数据框提供了许多基本的探索性绘图；其中之一就是箱线图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax = (state[<span class="string">&#x27;Population&#x27;</span>]/<span class="number">1_000_000</span>).plot.box()</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Population (millions)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>从这个箱线图我们可以立即看到，州人口中位数约为500万，一半的州人口介于约200万到约700万之间，并且存在一些人口<strong>异常值</strong>。箱子的顶部和底部分别是<strong>第75和第25百分位数</strong>。<strong>中位数</strong>由箱子中的水平线显示。虚线，被称为<strong>须（whiskers）</strong>，从箱子的顶部和底部延伸，表示大部分数据的范围。箱线图有许多变体；例如，参见
R 函数 <code>boxplot</code> 的文档 [R-base-2015]。默认情况下，R
函数将须延伸到箱子以外的最远点，但不会超过 <strong>1.5倍的
IQR</strong>。Matplotlib
使用相同的实现；其他软件可能使用不同的规则。</p>
<p>须线之外的任何数据都作为<strong>单个点或圆圈</strong>绘制（通常被认为是<strong>异常值</strong>）。</p>
<h4 id="频率表和直方图"><strong>频率表和直方图</strong></h4>
<p>Frequency Tables and Histograms</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.5.png" alt="T1.5" style="zoom:50%;" /></p>
<p>变量的<strong>频率表</strong>将变量范围划分为<strong>等距的片段</strong>，并告诉我们有多少个值落入每个片段中。表1-5显示了在
R 中计算的按州划分的人口频率表：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">breaks <span class="operator">&lt;-</span> seq<span class="punctuation">(</span>from<span class="operator">=</span><span class="built_in">min</span><span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">to<span class="operator">=</span><span class="built_in">max</span><span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">length</span><span class="operator">=</span><span class="number">11</span><span class="punctuation">)</span></span><br><span class="line">pop_freq <span class="operator">&lt;-</span> cut<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> breaks<span class="operator">=</span>breaks<span class="punctuation">,</span></span><br><span class="line">right<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">,</span> include.lowest<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">table<span class="punctuation">(</span>pop_freq<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(563626,4232659] (4232659,7901692] (7901692,11570725] </span><br><span class="line">               24                13                 6 </span><br><span class="line">(11570725,15239758] (15239758,18908791] (18908791,22577824] </span><br><span class="line">                 2                  1                  2 </span><br><span class="line">(22577824,26246857] (26246857,29915890] (29915890,33584923] </span><br><span class="line">                 1                  1                  0 </span><br><span class="line">(33584923,37253956] </span><br><span class="line">                 1 </span><br></pre></td></tr></table></figure>
<p><code>pandas.cut</code> 函数创建一个系列，将值映射到这些片段。使用
<code>value_counts</code> 方法，我们得到频率表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">binnedPopulation = pd.cut(state[<span class="string">&#x27;Population&#x27;</span>], <span class="number">10</span>)</span><br><span class="line">binnedPopulation.value_counts()</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(526935.67, 4232659.0]     24</span><br><span class="line">(4232659.0, 7901692.0]     13</span><br><span class="line">(7901692.0, 11570725.0]     6</span><br><span class="line">(15239758.0, 18908791.0]     2</span><br><span class="line">(18908791.0, 22577824.0]     2</span><br><span class="line">(11570725.0, 15239758.0]     1</span><br><span class="line">(33584923.0, 37253956.0]     1</span><br><span class="line">(22577824.0, 26246857.0]     1</span><br><span class="line">(26246857.0, 29915890.0]     1</span><br><span class="line">(29915890.0, 33584923.0]     0</span><br><span class="line">Name: Population, dtype: int64</span><br></pre></td></tr></table></figure>
<p>人口最少的州是怀俄明州，有563,626人，人口最多的州是加利福尼亚州，有37,253,956人。这给了我们一个
<span class="math inline">\(37,253,956 - 563,626 = 36,690,330\)</span>
的范围，我们必须将其划分为<strong>大小相等的箱</strong>——假设有10个箱。对于10个大小相等的箱，每个箱的宽度将是
<span
class="math inline">\(3,669,033\)</span>，因此第一个箱的范围将是从563,626到4,232,658。相比之下，最顶部的箱，从33,584,923到37,253,956，只有一个州：加利福尼亚。加利福尼亚下面的两个箱是空的，直到我们到达德克萨斯州。重要的是要<strong>包括空箱</strong>；这些箱中没有值的事实是有用的信息。用不同大小的箱进行实验也很有用。如果箱太大，分布的重要特征可能会被掩盖。如果箱太小，结果会过于精细，从而失去看到大局的能力。</p>
<blockquote>
<p>通用注解：</p>
<p>频率表和百分位数都通过创建<strong>箱</strong>来概括数据。一般来说，四分位数和十分位数的每个箱中将有<strong>相同的计数</strong>（等计数箱），但<strong>箱的大小会不同</strong>。相反，频率表的箱中将有<strong>不同的计数</strong>（等大小箱），而<strong>箱的大小将相同</strong>。</p>
</blockquote>
<p><strong>直方图</strong>是一种可视化频率表的方法，其中<strong>箱</strong>在
x 轴上，<strong>数据计数</strong>在 y
轴上。例如，在图1-3中，以1000万（1e+07）为中心的箱的范围大约是从800万到1200万，并且该箱中有<strong>六个州</strong>。</p>
<p>为了在 R 中创建与表1-5对应的直方图，使用 <code>hist</code> 函数并带
<code>breaks</code> 参数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Population&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> breaks<span class="operator">=</span>breaks<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>pandas 使用 <code>DataFrame.plot.hist</code>
方法支持数据框的直方图。使用关键字参数 <code>bins</code>
来定义箱的数量。各种绘图方法返回一个 <code>axis</code> 对象，可以使用
Matplotlib 对可视化进行进一步的微调：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax = (state[<span class="string">&#x27;Population&#x27;</span>] / <span class="number">1_000_000</span>).plot.hist(figsize=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Population (millions)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img3/面向数据科学家的实用统计学//F1.3.png" alt="F1.3" style="zoom:50%;" /></p>
<p>直方图如图1-3所示。通常，直方图的绘制方式使得：</p>
<ul>
<li>图中包含<strong>空箱</strong>。</li>
<li>箱子的<strong>宽度相等</strong>。</li>
<li>箱子的数量（或者等价地，箱子的大小）由<strong>用户决定</strong>。</li>
<li>条形是<strong>连续的</strong>——条形之间没有空隙，除非有空箱。</li>
</ul>
<blockquote>
<p>知识点：</p>
<p><strong>统计矩</strong> Statistical
Moments在统计理论中，位置和变异性分别被称为分布的<strong>第一和第二矩</strong>。第三和第四矩分别被称为<strong>偏度（skewness）和峰度（kurtosis）</strong>。偏度指的是数据是否偏向于更大或更小的值，而峰度则表示数据具有极端值的倾向。通常，不使用度量来测量偏度和峰度；相反，这些是通过视觉显示来发现的，例如图1-2和图1-3。</p>
</blockquote>
<h4 id="密度图和密度估计"><strong>密度图和密度估计</strong></h4>
<p>Density Plots and Estimates</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.4.png" alt="F1.4" style="zoom:50%;" /></p>
<p>与直方图相关的是<strong>密度图</strong>，它以<strong>连续线</strong>的形式显示数据值的分布。密度图可以被认为是<strong>平滑的直方图</strong>，尽管它通常通过<strong>核密度估计</strong>直接从数据计算得到（有关简短教程，请参见
[Duong-2001]）。图1-4展示了一个叠加在直方图上的密度估计。在 R
中，您可以使用 <code>density</code> 函数计算密度估计：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hist<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Murder.Rate&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> freq<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>density<span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;Murder.Rate&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">3</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&#x27;blue&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><code>pandas</code> 提供了 <code>density</code>
方法来创建密度图。使用参数 <code>bw_method</code>
来控制密度曲线的平滑度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax = state[<span class="string">&#x27;Murder.Rate&#x27;</span>].plot.hist(density=<span class="literal">True</span>, xlim=[<span class="number">0</span>,<span class="number">12</span>], bins=<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">12</span>))</span><br><span class="line">state[<span class="string">&#x27;Murder.Rate&#x27;</span>].plot.density(ax=ax)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Murder Rate (per 100,000)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>绘图函数通常接受一个可选的轴（<code>ax</code>）参数，这会使绘图被添加到同一张图上。</p>
</blockquote>
<p>与图1-3中绘制的直方图的一个关键区别是<strong>y轴的刻度</strong>：密度图对应于将直方图绘制为<strong>比例</strong>而不是<strong>计数</strong>（在
R 中，您可以使用参数 <code>freq=FALSE</code>
指定这一点）。请注意，<strong>密度曲线下的总面积=1</strong>，并且您计算的是曲线下<strong>任意两点之间的面积</strong>，而不是箱中的计数，这对应于分布中介于这两点之间的<strong>比例</strong>。</p>
<blockquote>
<p>知识点：</p>
<p><strong>密度估计</strong> Density Estimation</p>
<p>密度估计是一个丰富的课题，在统计文献中有悠久的历史。事实上，已经有超过20个
R 包发布，提供了用于密度估计的函数。[Deng-Wickham-2011] 对 R
包进行了全面综述，特别推荐了 <code>ASH</code> 或
<code>KernSmooth</code>。<code>pandas</code> 和
<code>scikit-learn</code>
中的密度估计方法也提供了很好的实现。对于许多数据科学问题，**没有必要担心各种类型的密度估计；使用基本函数就足够了。</p>
</blockquote>
<p><strong>关键思想</strong></p>
<ul>
<li><strong>频率直方图</strong>在 y 轴上绘制频率计数，在 x
轴上绘制变量值；它让人一目了然地了解数据的分布。</li>
<li><strong>频率表</strong>是直方图中频率计数的表格版本。</li>
<li><strong>箱线图</strong>——箱子的顶部和底部分别是第75和第25百分位数——也让人对数据分布有一个快速的了解；它经常用于并排显示以比较分布。</li>
<li><strong>密度图</strong>是直方图的平滑版本；它需要一个函数来基于数据估计一个图（当然，可能有多种估计方法）。</li>
</ul>
<h3 id="探索二元和类别数据"><strong>探索二元和类别数据</strong></h3>
<p>Exploring Binary and Categorical Data</p>
<p>对于<strong>类别数据</strong>，简单的<strong>比例或百分比</strong>就能说明数据的情况。</p>
<p><strong>探索类别数据的关键术语</strong></p>
<ul>
<li><strong>众数（Mode）</strong> 数据集中最常出现的类别或值。</li>
<li><strong>期望值（Expected value）</strong>
当类别可以与数值关联时，这表示<strong>基于类别发生概率的平均值</strong>。</li>
<li><strong>条形图（Bar charts）</strong>
将每个类别的频率或比例绘制成条形。</li>
<li><strong>饼图（Pie charts）</strong>
将每个类别的频率或比例绘制成饼状图中的扇形。</li>
</ul>
<p><img src="/img3/面向数据科学家的实用统计学//T1.6.png" alt="T1.6" style="zoom:67%;" /></p>
<p>获取一个二元变量或只有几个类别的类别变量的摘要是相当容易的：我们只需计算1的比例，或重要类别的比例。例如，表1-6显示了自2010年以来达拉斯/沃斯堡机场（Dallas/Fort
Worth
Airport）航班延误的百分比，按延误原因划分。延误被归类为由航空公司控制的因素、空中交通管制（ATC）系统延误、天气、安保或晚到的入港飞机。</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.5.png" alt="F1.5" style="zoom:33%;" /></p>
<p><strong>条形图</strong>在流行媒体中经常出现，是显示单个类别变量的常见可视化工具。类别列在x轴上，频率或比例列在y轴上。图1-5显示了达拉斯/沃斯堡（DFW）机场每年的延误情况，按原因划分，由R函数<code>barplot</code>生成：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">barplot<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>dfw<span class="punctuation">)</span> <span class="operator">/</span> <span class="number">6</span><span class="punctuation">,</span> cex.axis<span class="operator">=</span><span class="number">0.8</span><span class="punctuation">,</span> cex.names<span class="operator">=</span><span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">xlab<span class="operator">=</span><span class="string">&#x27;Cause of delay&#x27;</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&#x27;Count&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>pandas也支持数据框的条形图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax = dfw.transpose().plot.bar(figsize=(<span class="number">4</span>, <span class="number">4</span>), legend=<span class="literal">False</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Cause of delay&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Count&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>请注意，<strong>条形图与直方图相似</strong>；在<strong>条形图</strong>中，x轴表示因子变量的不同<strong>类别</strong>，而在<strong>直方图</strong>中，x轴表示单个变量在<strong>数值尺度</strong>上的值。在<strong>直方图</strong>中，条形通常彼此<strong>接触</strong>，间隙表示数据中未出现的值。在<strong>条形图</strong>中，条形彼此<strong>分离</strong>。</p>
<p><strong>饼图</strong>是条形图的替代品，尽管统计学家和数据可视化专家通常<strong>避用饼图</strong>，因为它们在视觉上提供的信息较少（参见
[Few-2007]）。</p>
<blockquote>
<p>通用注解：</p>
<p><strong>将数值数据视为类别数据</strong></p>
<p>在第22页的“频率表和直方图”中，我们研究了基于<strong>分箱</strong>数据的频率表。这隐式地将数值数据转换为<strong>有序因子</strong>。从这个意义上讲，直方图和条形图是相似的，只是条形图x轴上的类别<strong>没有顺序</strong>。将数值数据转换为类别数据是数据分析中一个重要且广泛使用的步骤，因为它<strong>降低了数据的复杂性（和大小）</strong>。这有助于在分析的初始阶段发现特征之间的关系。</p>
</blockquote>
<h4 id="众数"><strong>众数</strong></h4>
<p>Mode</p>
<p><strong>众数</strong>是数据中出现<strong>最频繁的值</strong>，如果出现平局则为多个值。例如，达拉斯/沃斯堡机场航班延误原因的众数是“<strong>入港</strong>”。另一个例子是，在美国大部分地区，宗教信仰的众数将是<strong>基督教</strong>。众数是<strong>类别数据</strong>的一种简单汇总统计量，通常不用于<strong>数值数据</strong>。</p>
<h4 id="期望值"><strong>期望值</strong></h4>
<p>Expected Value</p>
<p>一种特殊类型的<strong>类别数据</strong>是<strong>其类别代表或可以映射到相同尺度上离散值的数据</strong>。例如，一家新云技术的营销人员提供两种服务级别，一种定价为每月300美元，另一种为每月50美元。营销人员提供免费网络研讨会以产生潜在客户，公司估计5%的参与者会注册300美元的服务，15%会注册50美元的服务，80%不会注册任何服务。出于财务目的，这些数据可以用一个单一的“<strong>期望值</strong>”来汇总，这是一种<strong>加权平均值</strong>的形式，其中<strong>权重是概率</strong>。</p>
<p>期望值的计算方法如下： 1. 将每个结果乘以其发生的概率。 2.
将这些值相加。</p>
<p>在云服务示例中，一个网络研讨会参与者的期望值是每月22.50美元，计算如下：</p>
<p><span class="math display">\[
EV = 0.05 \times 300 + 0.15 \times 50 + 0.80 \times 0 = 22.5
\]</span>
期望值实际上是<strong>加权平均值的一种形式</strong>：它加入了<strong>未来预期</strong>和<strong>概率权重</strong>的概念，这些概率权重通常基于主观判断。期望值是<strong>商业估值和资本预算</strong>中的一个基本概念——例如，新收购公司五年利润的期望值，或者诊所新患者管理软件的预期成本节约。</p>
<h4 id="概率"><strong>概率</strong></h4>
<p>Probability</p>
<p>我们上面提到了一个值发生的<strong>概率</strong>。大多数人对概率有直观的理解，经常在天气预报（下雨的可能性）或体育分析（获胜的概率）中遇到这个概念。体育和比赛更多地以<strong>赔率</strong>来表达，赔率可以很容易地转换为概率（如果一支球队获胜的赔率是2比1，其获胜的概率是
<span class="math inline">\(2/(2+1) =
2/3\)</span>）。然而，令人惊讶的是，当涉及到定义它时，概率的概念可能是深刻哲学讨论的来源。幸运的是，我们在这里不需要一个正式的数学或哲学定义。就我们的目的而言，一个事件发生的概率是<strong>如果情况可以重复无数次，它发生的次数所占的比例</strong>。这通常是一个想象中的构造，但它足以作为对概率的操作性理解。</p>
<p><strong>关键思想</strong></p>
<ul>
<li>类别数据通常用<strong>比例</strong>来汇总，并可以在<strong>条形图</strong>中可视化。</li>
<li>类别可能代表<strong>不同的事物</strong>（苹果和橙子、男性和女性）、<strong>因子变量的级别</strong>（低、中、高），或已被<strong>分箱的数值数据</strong>。</li>
<li><strong>期望值</strong>是<strong>值乘以其发生概率的总和</strong>，常用于汇总因子变量的级别。</li>
</ul>
<h3 id="相关性"><strong>相关性</strong></h3>
<p>Correlation</p>
<p>在许多建模项目（无论是数据科学还是研究）中，探索性数据分析都涉及<strong>检查预测变量之间</strong>以及<strong>预测变量与目标变量之间</strong>的<strong>相关性</strong>。如果变量
X 和
Y（每个都有测量数据）的高值伴随着高值，低值伴随着低值，则称它们<strong>正相关</strong>。如果变量
X 的高值伴随着 Y 的低值，反之亦然，则变量<strong>负相关</strong>。</p>
<p><strong>相关性的关键术语</strong></p>
<ul>
<li><strong>相关系数（Correlation coefficient）</strong>
衡量数值变量之间关联程度的度量（范围从 -1 到 +1）。</li>
<li><strong>相关矩阵（Correlation matrix）</strong>
一个表格，其中变量同时显示在行和列上，单元格中的值是变量之间的相关性。</li>
<li><strong>散点图（Scatterplot）</strong> 一个图，其中 x
轴是某个变量的值，y 轴是另一个变量的值。</li>
</ul>
<p>考虑这两个变量，它们在从低到高的意义上是<strong>完全相关</strong>的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1: &#123;1, 2, 3&#125;</span><br><span class="line">v2: &#123;4, 5, 6&#125;</span><br></pre></td></tr></table></figure>
<p>它们的向量积之和是 <span class="math inline">\(1 \cdot 4 + 2 \cdot 5
+ 3 \cdot 6 =
32\)</span>。现在尝试打乱其中一个并重新计算——向量积之和永远不会高于32。所以这个积之和可以用作一个度量；也就是说，观察到的总和32可以与大量随机打乱的结果进行比较（事实上，这个想法与基于重采样（resampling-based）的估计有关；参见第97页的“置换检验”）。然而，这个度量产生的值本身并没有太大意义，除非参考重采样分布。</p>
<p>更有用的是一个<strong>标准化变体</strong>：<strong>相关系数（correlation
coefficient）</strong>，它提供了<strong>两个变量之间相关性的估计</strong>，并且始终在<strong>相同的尺度上</strong>。要计算<strong>皮尔逊相关系数（Pearson's
correlation
coefficient）</strong>，我们将变量1与均值的偏差乘以变量2与均值的偏差，然后除以标准差的乘积：</p>
<p><span class="math display">\[
r = \frac{\sum_{i=1}^{n} (x_i - \bar{x})(y_i - \bar{y})}{(n-1)s_x s_y}
\]</span> 请注意，我们除以 <span class="math inline">\(n-1\)</span>
而不是 <span
class="math inline">\(n\)</span>；有关更多详细信息，请参见第15页的“自由度，以及
n 还是 n-1？”。相关系数始终介于 +1（完全正相关）和
-1（完全负相关）之间；<strong>0表示没有相关性</strong>。</p>
<p>变量之间可能存在<strong>非线性</strong>关联，在这种情况下，相关系数可能不是一个有用的度量。税率和税收之间的关系就是一个例子：当税率从零增加时，税收也会增加。然而，一旦税率达到高水平并接近100%，逃税行为会增加，税收实际上会下降。</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.7.png" alt="T1.7" style="zoom:50%;" /></p>
<p>表1-7，被称为<strong>相关矩阵</strong>，显示了2012年7月至2015年6月期间电信股票日收益之间的相关性。从表中可以看出，威瑞森（VZ）和美国电话电报公司（T）的相关性最高。作为一家基础设施公司的
Level
3（LVLT），与其它公司的相关性最低。请注意对角线上的值都是1（一只股票与自身的相关性为1），以及对角线上方和下方的信息是冗余的。</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.6.png" alt="F1.6" style="zoom:50%;" /></p>
<p>像表1-7这样的相关表通常被绘制出来，以<strong>视觉化地展示多个变量之间的关系</strong>。图1-6显示了主要<strong>交易所交易基金（ETF）</strong>日收益之间的相关性。在R中，我们可以使用
<code>corrplot</code> 包轻松创建：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">etfs <span class="operator">&lt;-</span> sp500_px<span class="punctuation">[</span>row.names<span class="punctuation">(</span>sp500_px<span class="punctuation">)</span> <span class="operator">&gt;</span> <span class="string">&#x27;2012-07-01&#x27;</span><span class="punctuation">,</span></span><br><span class="line">sp500_sym<span class="punctuation">[</span>sp500_sym<span class="operator">$</span>sector <span class="operator">==</span> <span class="string">&#x27;etf&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;symbol&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">library<span class="punctuation">(</span>corrplot<span class="punctuation">)</span></span><br><span class="line">corrplot<span class="punctuation">(</span>cor<span class="punctuation">(</span>etfs<span class="punctuation">)</span><span class="punctuation">,</span> method<span class="operator">=</span><span class="string">&#x27;ellipse&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>在Python中也可以创建相同的图，但常用包中没有现成的实现。然而，大多数都支持使用<strong>热图</strong>来可视化相关矩阵。以下代码演示了使用
<code>seaborn.heat map</code>
包的方法。在随附的源代码库中，我们包含了用于生成更全面的可视化的Python代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">etfs = sp500_px.loc[sp500_px.index &gt; <span class="string">&#x27;2012-07-01&#x27;</span>,</span><br><span class="line">sp500_sym[sp500_sym[<span class="string">&#x27;sector&#x27;</span>] == <span class="string">&#x27;etf&#x27;</span>][<span class="string">&#x27;symbol&#x27;</span>]]</span><br><span class="line">sns.heatmap(etfs.corr(), vmin=-<span class="number">1</span>, vmax=<span class="number">1</span>,</span><br><span class="line">cmap=sns.diverging_palette(<span class="number">20</span>, <span class="number">220</span>, as_cmap=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>
<p>标准普尔500指数ETF（SPY）和道琼斯指数ETF（DIA）具有较高的相关性。同样，主要由科技公司组成的QQQ和XLK也呈正相关。防御性ETF，例如那些追踪黄金价格（GLD）、石油价格（USO）或市场波动率（VXX）的ETF，倾向于与其它ETF<strong>弱相关或负相关</strong>。椭圆的<strong>方向</strong>表明两个变量是<strong>正相关</strong>（椭圆指向右上）还是<strong>负相关</strong>（椭圆指向左上）。椭圆的<strong>阴影和宽度</strong>表示关联的<strong>强度</strong>：越薄、越深的椭圆对应着越强的关系。</p>
<p>与均值和标准差一样，<strong>相关系数对数据中的异常值敏感</strong>。软件包提供了<strong>经典相关系数的稳健替代品</strong>。例如，R包
<code>robust</code> 使用 <code>covRob</code>
函数来计算相关性的稳健估计。<code>scikit-learn</code> 模块
<code>sklearn.covariance</code> 中的方法实现了多种方法。</p>
<blockquote>
<p>知识点：</p>
<p><strong>其他相关性估计</strong></p>
<p>统计学家很久以前就提出了其他类型的相关系数，例如<strong>斯皮尔曼's
<span
class="math inline">\(\rho\)</span></strong>（rho）或<strong>肯德尔's
<span
class="math inline">\(\tau\)</span></strong>（tau）。这些是基于数据<strong>秩</strong>的相关系数。由于它们使用<strong>秩</strong>而不是<strong>值</strong>，这些估计量对<strong>异常值是稳健的</strong>，并且可以处理某些类型的<strong>非线性</strong>。然而，数据科学家通常可以坚持使用<strong>皮尔逊相关系数</strong>及其<strong>稳健替代品</strong>来进行探索性分析。基于秩的估计的吸引力主要在于<strong>较小的数据集</strong>和<strong>特定的假设检验</strong>。</p>
</blockquote>
<h4 id="散点图"><strong>散点图</strong></h4>
<p>Scatterplots</p>
<p>可视化两个测量数据变量之间关系的<strong>标准方法</strong>是使用<strong>散点图</strong>。x轴代表一个变量，y轴代表另一个变量，图上的每个点都是一个<strong>记录</strong>。图1-7显示了美国电话电报公司（ATT）和威瑞森（Verizon）日收益之间相关性的图。这在
R 中使用以下命令生成：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>telecom<span class="operator">$</span><span class="built_in">T</span><span class="punctuation">,</span> telecom<span class="operator">$</span>VZ<span class="punctuation">,</span> xlab<span class="operator">=</span><span class="string">&#x27;ATT (T)&#x27;</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&#x27;Verizon (VZ)&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>使用 pandas 的 <code>scatter</code> 方法可以在 Python
中生成相同的图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ax = telecom.plot.scatter(x=<span class="string">&#x27;T&#x27;</span>, y=<span class="string">&#x27;VZ&#x27;</span>, figsize=(<span class="number">4</span>, <span class="number">4</span>), marker=<span class="string">&#x27;$\u25EF$&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;ATT (T)&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Verizon (VZ)&#x27;</span>)</span><br><span class="line">ax.axhline(<span class="number">0</span>, color=<span class="string">&#x27;grey&#x27;</span>, lw=<span class="number">1</span>)</span><br><span class="line">ax.axvline(<span class="number">0</span>, color=<span class="string">&#x27;grey&#x27;</span>, lw=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>收益之间存在<strong>正向关系</strong>：虽然它们聚集在零点附近，但在大多数日子里，两只股票同步上涨或下跌（右上和左下象限）。很少有一天是一只股票显著下跌而另一只股票上涨，反之亦然（右下和左上象限）。</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.7.png" alt="F1.7" style="zoom:50%;" /></p>
<p>虽然图1-7只显示了754个数据点，但很明显，要识别图中中心的细节有多么困难。我们将在后面看到，<strong>如何通过增加点的透明度，或使用六边形分箱和密度图来帮助发现数据中的额外结构</strong>。</p>
<p><strong>关键思想</strong></p>
<ul>
<li><strong>相关系数</strong>衡量两个成对变量（例如，个人的身高和体重）彼此关联的程度。</li>
<li>当 v1 的高值伴随着 v2 的高值时，v1 和 v2
<strong>正相关</strong>。</li>
<li>当 v1 的高值伴随着 v2 的低值时，v1 和 v2
<strong>负相关</strong>。</li>
<li><strong>相关系数是一个标准化度量</strong>，因此它始终在
<strong>-1</strong>（完全负相关）到
<strong>+1</strong>（完全正相关）之间。</li>
<li><strong>相关系数为零</strong>表示<strong>没有相关性</strong>，但要注意，数据的随机排列仅凭偶然性就会产生正值和负值的相关系数。</li>
</ul>
<h3 id="探索两个或多个变量"><strong>探索两个或多个变量</strong></h3>
<p>Exploring Two or More Variables</p>
<p>我们所熟悉的估计量，如均值和方差，每次都只考察一个变量（<strong>单变量分析</strong>）。<strong>相关性分析</strong>（参见第30页的“相关性”）是一种重要的比较<strong>两个变量</strong>（<strong>双变量分析</strong>）的方法。在本节中，我们将探讨额外的估计量和图表，以及超过两个变量的情况（<strong>多变量分析</strong>）。</p>
<p><strong>探索两个或多个变量的关键术语</strong></p>
<ul>
<li><strong>列联表（Contingency table）</strong>
两个或多个类别变量之间的计数。</li>
<li><strong>六边形分箱（Hexagonal binning）</strong>
一种图，将两个数值变量的记录分箱到六边形中。</li>
<li><strong>等高线图（Contour plot）</strong>
一种像地形图一样显示两个数值变量密度的图。</li>
<li><strong>小提琴图（Violin plot）</strong>
类似于箱线图，但显示的是密度估计。</li>
</ul>
<p>与单变量分析一样，双变量分析既包括计算汇总统计量，也包括生成可视化显示。适当的双变量或多变量分析类型取决于数据的性质：数值型还是类别型。</p>
<h4 id="六边形分箱和等高线图"><strong>六边形分箱和等高线图</strong></h4>
<p><strong>（绘制数值型 vs. 数值型数据）</strong></p>
<p>Hexagonal Binning and Contours</p>
<p>(Plotting Numeric Versus Numeric Data)</p>
<p>当数据值相对较少时，<strong>散点图</strong>很好用。图1-7中的股票收益图只涉及大约750个点。对于拥有数十万或数百万条记录的数据集，散点图会<strong>过于密集</strong>，因此我们需要一种不同的方式来可视化这种关系。为了说明这一点，考虑
<code>kc_tax</code>
数据集，其中包含华盛顿州金县住宅的税收评估价值。为了专注于数据的主要部分，我们使用
<code>subset</code> 函数去除了非常昂贵、非常小或非常大的住宅：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kc_tax0 <span class="operator">&lt;-</span> subset<span class="punctuation">(</span>kc_tax<span class="punctuation">,</span> TaxAssessedValue <span class="operator">&lt;</span> <span class="number">750000</span> <span class="operator">&amp;</span></span><br><span class="line">SqFtTotLiving <span class="operator">&gt;</span> <span class="number">100</span> <span class="operator">&amp;</span></span><br><span class="line">SqFtTotLiving <span class="operator">&lt;</span> <span class="number">3500</span><span class="punctuation">)</span></span><br><span class="line">nrow<span class="punctuation">(</span>kc_tax0<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1] 432693</span><br></pre></td></tr></table></figure>
<p>在pandas中，我们按以下方式筛选数据集：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kc_tax0 = kc_tax.loc[(kc_tax.TaxAssessedValue &lt; <span class="number">750000</span>) &amp;</span><br><span class="line">(kc_tax.SqFtTotLiving &gt; <span class="number">100</span>) &amp;</span><br><span class="line">(kc_tax.SqFtTotLiving &lt; <span class="number">3500</span>), :]</span><br><span class="line">kc_tax0.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(432693, 3)</span><br></pre></td></tr></table></figure>
<p><img src="/img3/面向数据科学家的实用统计学//F1.8.png" alt="F1.8" style="zoom:70%;" /></p>
<p>图1-8是金县住宅的<strong>已完成居住面积</strong>和<strong>税收评估价值</strong>之间关系的<strong>六边形分箱图</strong>。我们没有绘制点（这会像一个整体的黑云），而是将记录分组到<strong>六边形箱</strong>中，并用颜色绘制这些六边形，<strong>颜色表示该箱中的记录数量</strong>。在这张图中，平方英尺和税收评估价值之间的正向关系是清晰的。一个有趣的特征是，在底部的主（最暗）带上方隐约可见额外的条带，这表明这些住宅与主带中的住宅具有相同的居住面积，但税收评估价值更高。</p>
<p>图1-8由 Hadley Wickham 开发的强大 R 包 <code>ggplot2</code> 生成
[ggplot2]。<code>ggplot2</code>
是几个用于数据高级探索性视觉分析的新软件库之一；请参见第43页的“可视化多个变量”：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>kc_tax0<span class="punctuation">,</span> <span class="punctuation">(</span>aes<span class="punctuation">(</span>x<span class="operator">=</span>SqFtTotLiving<span class="punctuation">,</span> y<span class="operator">=</span>TaxAssessedValue<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">stat_binhex<span class="punctuation">(</span>color<span class="operator">=</span><span class="string">&#x27;white&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">theme_bw<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">scale_fill_gradient<span class="punctuation">(</span>low<span class="operator">=</span><span class="string">&#x27;white&#x27;</span><span class="punctuation">,</span> high<span class="operator">=</span><span class="string">&#x27;black&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">labs<span class="punctuation">(</span>x<span class="operator">=</span><span class="string">&#x27;Finished Square Feet&#x27;</span><span class="punctuation">,</span> y<span class="operator">=</span><span class="string">&#x27;Tax-Assessed Value&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>在 Python 中，使用 pandas 数据框方法 <code>hexbin</code>
可以轻松获得六边形分箱图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ax = kc_tax0.plot.hexbin(x=<span class="string">&#x27;SqFtTotLiving&#x27;</span>, y=<span class="string">&#x27;TaxAssessedValue&#x27;</span>,</span><br><span class="line">gridsize=<span class="number">30</span>, sharex=<span class="literal">False</span>, figsize=(<span class="number">5</span>, <span class="number">4</span>))</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Finished Square Feet&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Tax-Assessed Value&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img3/面向数据科学家的实用统计学//F1.9.png" alt="F1.9" style="zoom:50%;" /></p>
<p>图1-9使用<strong>等高线</strong>叠加在散点图上，以可视化两个数值变量之间的关系。这些等高线本质上是两个变量的<strong>地形图</strong>；每个等高线带代表一个特定的<strong>点密度</strong>，当靠近“峰值”时密度会增加。这张图显示了与图1-8类似的情况：在主峰值的“北方”有一个次要峰值。这张图也是使用
<code>ggplot2</code> 和内置的 <code>geom_density2d</code>
函数创建的：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>kc_tax0<span class="punctuation">,</span> aes<span class="punctuation">(</span>SqFtTotLiving<span class="punctuation">,</span> TaxAssessedValue<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">theme_bw<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">geom_point<span class="punctuation">(</span>alpha<span class="operator">=</span><span class="number">0.1</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">geom_density2d<span class="punctuation">(</span>color<span class="operator">=</span><span class="string">&#x27;white&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">labs<span class="punctuation">(</span>x<span class="operator">=</span><span class="string">&#x27;Finished Square Feet&#x27;</span><span class="punctuation">,</span> y<span class="operator">=</span><span class="string">&#x27;Tax-Assessed Value&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>Python中的 <code>seaborn</code> 包 <code>kdeplot</code>
函数创建等高线图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.kdeplot(kc_tax0.SqFtTotLiving, kc_tax0.TaxAssessedValue, ax=ax)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Finished Square Feet&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Tax-Assessed Value&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>还有其他类型的图表用于显示两个数值变量之间的关系，包括<strong>热图</strong>。热图、六边形分箱和等高线图都提供了<strong>二维密度</strong>的视觉表示。从这个意义上说，它们是<strong>直方图和密度图的自然类比</strong>。</p>
<h4 id="两个类别变量"><strong>两个类别变量</strong></h4>
<p>Two Categorical Variables</p>
<p><img src="/img3/面向数据科学家的实用统计学//T1.8.png" alt="T1.8" style="zoom:50%;" /></p>
<p>汇总两个类别变量的一种有用方法是<strong>列联表</strong>（contingency
table）——一个按类别划分的<strong>计数表</strong>。表1-8显示了个人贷款的<strong>评级</strong>和该贷款的<strong>结果</strong>之间的列联表。这取自点对点借贷行业的领导者
Lending Club
提供的数据。评级从A（高）到G（低）。结果要么是<strong>全额偿付（fully
paid）</strong>、<strong>当前（current）</strong>、<strong>逾期（late）</strong>，要么是<strong>核销（charged
off）</strong>（不期望收回贷款余额）。该表显示了<strong>计数</strong>和<strong>行百分比</strong>。与低评级贷款相比，高评级贷款的逾期/核销百分比非常低。</p>
<p>列联表可以只看<strong>计数</strong>，也可以包括<strong>列和总百分比</strong>。Excel中的<strong>数据透视表</strong>可能是用于创建列联表的最常用工具。在
R 中，<code>descr</code> 包中的 <code>CrossTable</code>
函数可以生成列联表，以下代码用于创建表1-8：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>descr<span class="punctuation">)</span></span><br><span class="line">x_tab <span class="operator">&lt;-</span> CrossTable<span class="punctuation">(</span>lc_loans<span class="operator">$</span>grade<span class="punctuation">,</span> lc_loans<span class="operator">$</span>status<span class="punctuation">,</span></span><br><span class="line">prop.c<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span> prop.chisq<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span> prop.t<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><code>pivot_table</code> 方法在 Python
中创建数据透视表。<code>aggfunc</code>
参数允许我们获得计数。计算百分比稍微复杂一些：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">crosstab = lc_loans.pivot_table(index=<span class="string">&#x27;grade&#x27;</span>, columns=<span class="string">&#x27;status&#x27;</span>,</span><br><span class="line">aggfunc=<span class="keyword">lambda</span> x: <span class="built_in">len</span>(x), margins=<span class="literal">True</span>)</span><br><span class="line">df = crosstab.loc[<span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;G&#x27;</span>,:].copy()</span><br><span class="line">df.loc[:,<span class="string">&#x27;Charged Off&#x27;</span>:<span class="string">&#x27;Late&#x27;</span>] = df.loc[:,<span class="string">&#x27;Charged Off&#x27;</span>:<span class="string">&#x27;Late&#x27;</span>].div(df[<span class="string">&#x27;All&#x27;</span>],</span><br><span class="line">axis=<span class="number">0</span>)</span><br><span class="line">df[<span class="string">&#x27;All&#x27;</span>] = df[<span class="string">&#x27;All&#x27;</span>] / <span class="built_in">sum</span>(df[<span class="string">&#x27;All&#x27;</span>])</span><br><span class="line">perc_crosstab = df</span><br></pre></td></tr></table></figure>
<p><code>margins</code> 关键字参数将添加列和行总和。
我们创建数据透视表的副本，忽略列总和。 我们用行总和除以行。
我们将“All”列除以它的总和。</p>
<h4 id="类别数据和数值数据"><strong>类别数据和数值数据</strong></h4>
<p>Categorical and Numeric Data</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.10.png" alt="F1.10" style="zoom:50%;" /></p>
<p><strong>箱线图</strong>（参见第20页的“百分位数和箱线图”）是一种<strong>简单的方法</strong>，用于<strong>直观地比较</strong>根据<strong>类别变量</strong>分组的<strong>数值变量</strong>的分布。例如，我们可能想比较航班延误的百分比在不同航空公司之间有何差异。图1-10显示了一个月内，由于航空公司自身可控因素导致的航班延误百分比：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boxplot<span class="punctuation">(</span>pct_carrier_delay <span class="operator">~</span> airline<span class="punctuation">,</span> data<span class="operator">=</span>airline_stats<span class="punctuation">,</span> ylim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">50</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>pandas 的 <code>boxplot</code> 方法接受 <code>by</code>
参数，该参数将数据集分成组并创建单独的箱线图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ax = airline_stats.boxplot(by=<span class="string">&#x27;airline&#x27;</span>, column=<span class="string">&#x27;pct_carrier_delay&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Daily % of Delayed Flights&#x27;</span>)</span><br><span class="line">plt.suptitle(<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>阿拉斯加航空以<strong>延误最少</strong>而脱颖而出，而美国航空<strong>延误最多</strong>：美国航空的下四分位数<strong>高于</strong>阿拉斯加航空的上四分位数。</p>
<p>由 [Hintze-Nelson-1998]
引入的<strong>小提琴图</strong>是对箱线图的增强，它将<strong>密度估计</strong>与
y
轴上的密度一起绘制。密度被<strong>镜像并翻转</strong>，填充形成的形状，创造出类似<strong>小提琴</strong>的图像。小提琴图的优点是它可以显示箱线图中<strong>不明显</strong>的分布细微差别。另一方面，箱线图更清晰地显示了数据中的<strong>异常值</strong>。在
<code>ggplot2</code> 中，<code>geom_violin</code>
函数可用于创建小提琴图，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>data<span class="operator">=</span>airline_stats<span class="punctuation">,</span> aes<span class="punctuation">(</span>airline<span class="punctuation">,</span> pct_carrier_delay<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">ylim<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">50</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">geom_violin<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">labs<span class="punctuation">(</span>x<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">,</span> y<span class="operator">=</span><span class="string">&#x27;Daily % of Delayed Flights&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>小提琴图可以使用 <code>seaborn</code> 包的 <code>violinplot</code>
方法获得：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.violinplot(airline_stats.airline, airline_stats.pct_carrier_delay,</span><br><span class="line">inner=<span class="string">&#x27;quartile&#x27;</span>, color=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Daily % of Delayed Flights&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img3/面向数据科学家的实用统计学//F1.11.png" alt="F1.11" style="zoom:50%;" /></p>
<p>相应的图如图1-11所示。小提琴图显示，阿拉斯加航空以及程度较轻的达美航空，其分布<strong>集中在零点附近</strong>。这种现象在箱线图中<strong>不那么明显</strong>。您可以通过在绘图中添加
<code>geom_boxplot</code>
将小提琴图与箱线图结合起来（尽管这在使用颜色时效果最佳）。</p>
<h4 id="可视化多个变量"><strong>可视化多个变量</strong></h4>
<p>Visualizing Multiple Variables</p>
<p>用于比较两个变量的图表类型——散点图、六边形分箱和箱线图——可以很容易地通过<strong>条件化</strong>（conditioning）的概念扩展到更多的变量。作为一个例子，回顾图1-8，它展示了房屋的已完成居住面积和其税收评估价值之间的关系。我们观察到，似乎有一群房屋每平方英尺的税收评估价值更高。深入挖掘，图1-12通过绘制一组邮政编码的数据来解释<strong>位置的影响</strong>。现在情况清晰得多：一些邮政编码（98105,
98126）的税收评估价值比其他邮政编码（98108,
98188）<strong>高得多</strong>。这种差异导致了在图1-8中观察到的<strong>聚类</strong>。</p>
<p><img src="/img3/面向数据科学家的实用统计学//F1.12.png" alt="F1.12" style="zoom:50%;" /></p>
<p>我们使用 <code>ggplot2</code>
和<strong>分面</strong>（facets）或<strong>条件化变量</strong>（conditioning
variable）（在本例中为邮政编码）的概念创建了图1-12：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>subset<span class="punctuation">(</span>kc_tax0<span class="punctuation">,</span> ZipCode <span class="operator">%in%</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">98188</span><span class="punctuation">,</span> <span class="number">98105</span><span class="punctuation">,</span> <span class="number">98108</span><span class="punctuation">,</span> <span class="number">98126</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">aes<span class="punctuation">(</span>x<span class="operator">=</span>SqFtTotLiving<span class="punctuation">,</span> y<span class="operator">=</span>TaxAssessedValue<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">stat_binhex<span class="punctuation">(</span>color<span class="operator">=</span><span class="string">&#x27;white&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">theme_bw<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">scale_fill_gradient<span class="punctuation">(</span>low<span class="operator">=</span><span class="string">&#x27;white&#x27;</span><span class="punctuation">,</span> high<span class="operator">=</span><span class="string">&#x27;blue&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">labs<span class="punctuation">(</span>x<span class="operator">=</span><span class="string">&#x27;Finished Square Feet&#x27;</span><span class="punctuation">,</span> y<span class="operator">=</span><span class="string">&#x27;Tax-Assessed Value&#x27;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">facet_wrap<span class="punctuation">(</span><span class="string">&#x27;ZipCode&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>ggplot</code> 函数 <code>facet_wrap</code> 和
<code>facet_grid</code> 来指定条件化变量。</p>
<p>大多数 Python 包的<strong>可视化都基于
Matplotlib</strong>。虽然原则上可以使用 Matplotlib
创建分面图，但代码可能会变得很复杂。幸运的是，<code>seaborn</code>
有一种相对简单的方法来创建这些图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">zip_codes = [<span class="number">98188</span>, <span class="number">98105</span>, <span class="number">98108</span>, <span class="number">98126</span>]</span><br><span class="line">kc_tax_zip = kc_tax0.loc[kc_tax0.ZipCode.isin(zip_codes),:]</span><br><span class="line">kc_tax_zip</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hexbin</span>(<span class="params">x, y, color,</span></span><br><span class="line"><span class="params">**kwargs</span>):</span><br><span class="line">cmap = sns.light_palette(color, as_cmap=<span class="literal">True</span>)</span><br><span class="line">plt.hexbin(x, y, gridsize=<span class="number">25</span>, cmap=cmap,</span><br><span class="line">**kwargs)</span><br><span class="line">g = sns.FacetGrid(kc_tax_zip, col=<span class="string">&#x27;ZipCode&#x27;</span>, col_wrap=<span class="number">2</span>)</span><br><span class="line">g.<span class="built_in">map</span>(hexbin, <span class="string">&#x27;SqFtTotLiving&#x27;</span>, <span class="string">&#x27;TaxAssessedValue&#x27;</span>,</span><br><span class="line">extent=[<span class="number">0</span>, <span class="number">3500</span>, <span class="number">0</span>, <span class="number">700000</span>])</span><br><span class="line">g.set_axis_labels(<span class="string">&#x27;Finished Square Feet&#x27;</span>, <span class="string">&#x27;Tax-Assessed Value&#x27;</span>)</span><br><span class="line">g.set_titles(<span class="string">&#x27;Zip code &#123;col_name:.0f&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>使用参数 <code>col</code> 和 <code>row</code>
来指定条件化变量。对于单个条件化变量，将 <code>col</code> 与
<code>col_wrap</code> 一起使用，以将分面图包装成多行。<code>map</code>
方法使用原始数据集中不同邮政编码的子集来调用 <code>hexbin</code>
函数。<code>extent</code> 定义了 x 和 y 轴的<strong>范围</strong>。</p>
<p>图形系统中的<strong>条件化变量</strong>概念由 Rick Becker、Bill
Cleveland 等人在贝尔实验室开发的 <strong>Trellis graphics</strong>
[Trellis-Graphics] 首创。这个想法已经传播到各种现代图形系统，例如 R 中的
<code>lattice</code> [lattice] 和 <code>ggplot2</code> 包，以及 Python
中的 <code>seaborn</code> [seaborn] 和 <code>Bokeh</code> [bokeh]
模块。条件化变量也是 Tableau 和 Spotfire
等商业智能平台不可或缺的一部分。随着巨大计算能力的出现，现代可视化平台已经远远超出了探索性数据分析的简陋开端。然而，半个世纪前发展起来的关键概念和工具（例如，简单的箱线图）仍然构成了这些系统的基础。</p>
<p><strong>关键思想</strong></p>
<ul>
<li><strong>六边形分箱</strong>和<strong>等高线图</strong>是<strong>有用的工具</strong>，可以同时对两个数值变量进行<strong>图形化检查</strong>，而不会被海量数据所淹没。</li>
<li><strong>列联表</strong>是查看两个<strong>类别变量</strong>计数的<strong>标准工具</strong>。</li>
<li><strong>箱线图</strong>和<strong>小提琴图</strong>允许您将一个<strong>数值变量</strong>与一个<strong>类别变量</strong>进行绘图。</li>
</ul>
<h3 id="总结"><strong>总结</strong></h3>
<p>由<strong>约翰·图基（John
Tukey）</strong>首创的<strong>探索性数据分析（Exploratory data
analysis）（EDA）</strong>为数据科学领域奠定了基础。EDA
的<strong>核心思想</strong>是：任何基于数据的项目，其<strong>第一步也是最重要的一步就是查看数据</strong>。通过<strong>汇总</strong>和<strong>可视化</strong>数据，您可以获得对项目的宝贵直觉和理解。</p>
<p>本章回顾了从简单度量（如位置和变异性的估计）到丰富的视觉显示（探索多个变量之间的关系，如图1-12所示）等各种概念。开源社区正在开发的各种工具和技术，结合
R 和 Python
语言的表现力，创造了大量探索和分析数据的方法。<strong>探索性分析应该成为任何数据科学项目的基石</strong>。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BB%9F%E8%AE%A1/" rel="tag"># 统计</a>
              <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag"># 深度学习</a>
              <a href="/tags/AI/" rel="tag"># AI</a>
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"># 机器学习</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/" rel="tag"># 数据科学</a>
              <a href="/tags/R/" rel="tag"># R</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/09/25/%E7%AC%AC2%E7%AB%A0%20%E6%95%B0%E6%8D%AE%E4%B8%8E%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83/" rel="prev" title="第2章 数据与抽样分布">
                  <i class="fa fa-chevron-left"></i> 第2章 数据与抽样分布
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/11/06/%E3%80%8A%E4%B8%80%E5%8F%A5%E9%A1%B6%E4%B8%80%E4%B8%87%E5%8F%A5%E3%80%8B%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/" rel="next" title="《一句顶一万句》读书心得">
                  《一句顶一万句》读书心得 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rayman.hung</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
